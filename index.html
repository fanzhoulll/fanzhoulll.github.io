<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Blog, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="A lifelong learner&apos;s blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Fan Zhou">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Fan Zhou">
<meta property="og:description" content="A lifelong learner&apos;s blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Fan Zhou">
<meta name="twitter:description" content="A lifelong learner&apos;s blog">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/"/>

  <title> Fan Zhou </title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  










  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Fan Zhou</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/16/programmingpearls/column10/" itemprop="url">
                  Squeezing Space (column 10)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-16T20:33:51+08:00" content="2016-08-16">
              2016-08-16
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Notes-of-Programming-Pearls/" itemprop="url" rel="index">
                    <span itemprop="name">Notes of Programming Pearls</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/16/programmingpearls/column10/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/08/16/programmingpearls/column10/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>This column introduces some techniques to reduce space usage of program.</p>
<h2 id="Saving-a-sparse-matrix"><a href="#Saving-a-sparse-matrix" class="headerlink" title="Saving a sparse matrix"></a>Saving a sparse matrix</h2><p>First let us start with an example. We need to store a sparse table with 2000 integers (range from 0 to 1999) distributed in a 200*200 matrix. So half of the matrix is empty. Part of the matrix is shown as followings:</p>
<p><img src="/content/images/2016/8/sparsematrix.png" alt="anagrams"></p>
<p>We can store the matrix using array. Assuming each integer needs 4 byte, total space usage is 4<em>200</em>200 = 160 kbyte.</p>
<p>We can easily shrink the space by representing the sparse matrix with an column array and linked lists to represent elements in the given column. The data structure is shown as followings:</p>
<p><img src="/content/images/2016/8/pointerrepresent.png" alt="anagrams"></p>
<p>Note each element consist of a pointer (4 byte) and two integers (4 byte each). So 2000 elements takes 12*2000 = 24000 byte. The 200 column header pointers take 800 byte. Total space is 24.8 byte. Even though is a little slower to look up an element compared with the array representation (averagely visit 10 nodes to find a element), it is totally worth it because of the over 6X space reduction.</p>
<p>Another way to represent the sparse matrix is using three arrays: a column array with 201 elements and two parallel arrays with 2000 elements (one save row index and one save integers).</p>
<p><img src="/content/images/2016/8/arrayrepresnet.png" alt="anagrams"></p>
<p>It is easy to compute the total space usage for this version is only 8.42 kbyte (with each integer saved with 2 byte). If we want to further reduce space, we can use singe byte to save row index since it is always below 200. This reduce space to 6.4 kbyte.</p>
<p>Finally, if the index time is not important, we can simply sequentially search through the array of integers by singe-byte <em>column</em> and <em>row</em> fields. This achieves ultimate space of 4 kbyte.</p>
<h2 id="Summary-of-Techniques-for-Data-Space"><a href="#Summary-of-Techniques-for-Data-Space" class="headerlink" title="Summary of Techniques for Data Space"></a>Summary of Techniques for Data Space</h2><p><em>Recompute, Don’t Store</em>: Let us say if we need to save a huge tax table, maybe it is better to compute the tax value instead of storing it.</p>
<p><em>Sparse Data Structures</em>: We have already seen this in above example.</p>
<p><em>Data compression</em>: For example, we can encode two digits <em>a</em> and <em>b</em> using one digit <em>c</em>, where <em>c = 10*a + b</em>. Then we decode a and b by taking:</p>
<pre><code>a = c / 10
b = c % 10
</code></pre><p><em>Sharing storage</em>: We need to save two matrixes (<em>a</em> and <em>b</em>) that represent distances between points. Brian Kernighan using array-overlay to reduce two matrixes into one.</p>
<p><img src="/content/images/2016/8/arrayoverlay.png" alt="anagrams"></p>
<h2 id="Takeaway"><a href="#Takeaway" class="headerlink" title="Takeaway"></a>Takeaway</h2><ol>
<li>Before trying to optimize space, think what benefit does it brought ?</li>
<li>Data can have hot space, as we have seen in the sparse structure.</li>
<li>Some tradeoffs between space and time is necessary, but we should carefully study the alternatives before make such decision. Sometimes a better solution can yield improvement in all aspects.</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/13/beautyofprogramming/1_16/" itemprop="url">
                  24 Game
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-13T16:25:14+08:00" content="2016-08-13">
              2016-08-13
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/The-Art-of-Algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">The Art of Algorithm</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/13/beautyofprogramming/1_16/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/08/13/beautyofprogramming/1_16/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><em>Problem:</em> Design an algorithm, find solution for <a href="https://en.wikipedia.org/wiki/24_Game" target="_blank" rel="external">24 game</a>.</p>
<p> <em>Solution:</em> Abstractly, what we need to do is to use <code>+, -, *, /, (, )</code> to construct formulas with the a 4-number array <em>A=[a, b, c, d]</em>, so that the result is 24. The simplest solution is brute force. We can try all different combinations of number sequence, arithmetic operators and brackets to find the solution.</p>
<p>we can use following recursive steps to solve the problem:</p>
<ol>
<li>Choose two numbers <em>a</em>, <em>b</em>, compute <em>a+b</em>.</li>
<li>Put <em>a+b</em> back to the <em>A</em> and delete <em>a</em>,<em>b</em>, get a new array <em>A’ = [a+b, c, d]</em>.</li>
<li>Back to Step 1 with <em>A’</em></li>
</ol>
<p>Of course, in step 1 we should also compute <em>a-b, b-a, a*b, a/b (b!=0), b/a (a!=0)</em> to get the result.</p>
<p>While the idea is simple, the program itself is error-prone. I made (at least) following four mistakes when try to implement it:</p>
<ol>
<li>It is possible that the final result is not integer 24, but a floating point number that very close to 24 (because of division operation in solution).</li>
<li>We should choose every possible combination of <em>a</em> and <em>b</em> in set <em>A</em> (step 1). Naively choose first and second element does not work.</li>
<li>After we iterate over all possible operators yet still cannot find a solution, we should restore set <em>A</em> from <em>A’</em> and try other elements. In above example example, we should recover set <em>A’ = [f(a, b), c, d]</em> to <em>A = [a, b, c, d]</em>, where <em>f(a, b)</em> is an operation on <em>a</em> and <em>b</em>.</li>
<li>To easily recover <em>A</em>, we do not really need to delete element <em>a</em> and <em>b</em> in set <em>A</em>.  Instead, we can replace <em>a</em> with <em>a+b</em> and replace <em>b</em> with the last element in the input array. Then we could recursive call the solution search function on the array except the last element (<em>b</em>).</li>
</ol>
<p>The complete python code is shown as followings:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line">nums = [<span class="number">1</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</div><div class="line">results = map(str, nums)</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">solve24game</span><span class="params">(nums)</span>:</span></div><div class="line">    <span class="comment"># Recursive terminate condition: &lt;=1 element left</span></div><div class="line">    <span class="keyword">if</span> <span class="keyword">not</span> nums:</div><div class="line">        <span class="keyword">return</span></div><div class="line">    <span class="keyword">if</span> len(nums) == <span class="number">1</span>:</div><div class="line">        <span class="keyword">if</span> abs(nums[<span class="number">0</span>] - <span class="number">24</span>) &lt; <span class="number">0.0001</span>:</div><div class="line">            <span class="keyword">print</span> results[<span class="number">0</span>][<span class="number">1</span>:<span class="number">-1</span>]</div><div class="line">        <span class="keyword">return</span></div><div class="line">    n = len(nums)</div><div class="line">    <span class="comment"># Iterate over every possible combination of i and j</span></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, n):</div><div class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(i+<span class="number">1</span>, n):</div><div class="line">            a = nums[i]</div><div class="line">            b = nums[j]</div><div class="line">            res_a = results[i]</div><div class="line">            res_b = results[j]</div><div class="line">            <span class="comment"># Replace nums[i] with a+b</span></div><div class="line">            nums[i] = a+b</div><div class="line">            <span class="comment"># Replace nums[j] with last elem</span></div><div class="line">            nums[j] = nums[n<span class="number">-1</span>]</div><div class="line">            results[j] = results[n<span class="number">-1</span>]</div><div class="line">            <span class="comment"># Replace results[i] with results[i] + results[j]</span></div><div class="line">            results[i] = <span class="string">'('</span> + res_a + <span class="string">'+'</span> + res_b + <span class="string">')'</span></div><div class="line">            solve24game(nums[<span class="number">0</span>:(n<span class="number">-1</span>)])</div><div class="line">            nums[i] = a-b</div><div class="line">            results[i] = <span class="string">'('</span> + res_a + <span class="string">'-'</span> + res_b + <span class="string">')'</span></div><div class="line">            solve24game(nums[<span class="number">0</span>:(n<span class="number">-1</span>)])</div><div class="line">            nums[i] = b-a</div><div class="line">            results[i] = <span class="string">'('</span> + res_b + <span class="string">'-'</span> + res_a + <span class="string">')'</span></div><div class="line">            solve24game(nums[<span class="number">0</span>:(n<span class="number">-1</span>)])</div><div class="line">            results[i] = <span class="string">'('</span> + res_a + <span class="string">'*'</span> + res_b + <span class="string">')'</span></div><div class="line">            nums[i] = a*b</div><div class="line">            solve24game(nums[<span class="number">0</span>:(n<span class="number">-1</span>)])</div><div class="line">            <span class="keyword">if</span> a != <span class="number">0</span>:</div><div class="line">                results[i] = <span class="string">'('</span> + res_b + <span class="string">'/'</span> + res_a + <span class="string">')'</span></div><div class="line">                nums[i] = float(b)/a</div><div class="line">                solve24game(nums[<span class="number">0</span>:(n<span class="number">-1</span>)])</div><div class="line">            <span class="keyword">if</span> b != <span class="number">0</span>:</div><div class="line">                results[i] = <span class="string">'('</span> + res_a + <span class="string">'/'</span> + res_b + <span class="string">')'</span></div><div class="line">                nums[i] = float(a)/b</div><div class="line">                solve24game(nums[<span class="number">0</span>:(n<span class="number">-1</span>)])</div><div class="line">            <span class="comment"># Recover original array</span></div><div class="line">            nums[i] = a</div><div class="line">            nums[j] = b</div><div class="line">            results[i] = res_a</div><div class="line">            results[j] = res_b</div><div class="line"></div><div class="line"><span class="comment"># Test</span></div><div class="line">solve24game(nums)</div></pre></td></tr></table></figure>
<p>The key takeaway from this problem is the writing of recursive program. Think carefully about the termination condition, how to reduce problem size in each iteration and how to restore the previous stage after all iterations are over.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/09/beautyofprogramming/1_8/" itemprop="url">
                  Elevator scheduling
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-09T15:47:35+08:00" content="2016-08-09">
              2016-08-09
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/The-Art-of-Algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">The Art of Algorithm</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/09/beautyofprogramming/1_8/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/08/09/beautyofprogramming/1_8/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><em>Problem:</em> Assuming a building has <em>N</em> levels. The elevator will only stop at one level (to save time), and people have to climb to the level they choose. Designing an elevator scheduling algorithm, so that the total levels people have to climb are minimized.</p>
<p><em>Solution 1:</em> Assuming elevator stops at level <em>K</em>, and the number of people to level <em>i</em> is $n_i$. So the total levels people have climb is $L_t = \sum_{i=1}^{N} n_i*|K-i|$.</p>
<p>The obvious solution is to compute $L_t$ for <em>K=1 to N</em>, and then choose the target <em>K</em> that leads to the minimum $L_t$. The code is also straightforward:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">targetK = <span class="number">0</span>;</div><div class="line">lt = <span class="number">0</span>, lmin = <span class="number">0</span>;</div><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span> k=<span class="number">0</span>; k &lt; N; k++)</div><div class="line">&#123;</div><div class="line">  lt = <span class="number">0</span>;</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i &lt; N; i++)</div><div class="line">    <span class="comment">// n[] saves number of people that choose each level</span></div><div class="line">    lt += <span class="built_in">abs</span>(k-i)*n[i];</div><div class="line">  <span class="keyword">if</span> ((lt &lt; lmin) || (lmin == <span class="number">0</span>))</div><div class="line">  &#123;</div><div class="line">    lmin = lt;</div><div class="line">    targetK = k;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">return</span> targetK;</div></pre></td></tr></table></figure>
<p>The time complexity of this algorithm is O($N^2$).</p>
<p><em>Solution 2:</em> Assuming total levels people have to climb is $L_i$ if elevator stops at level <em>i</em>. Then what is $L_{i+1}$ ?</p>
<p>Let $n_p$ denote total number of people that choose level <em>i</em> and below, and $n_q$ denote the rest, then we have $L_{i+1} = L_i + n_p - n_q$. It is easy to see that $L_{i+1} &lt; L_i$ if $n_p &lt; n_q$. Note $n_q = N-n_p$, the condition can be further simplified to $n_p &lt; N/2$. This implies that $L_i$ keeps decreasing as long as $n_p &lt; N/2$ and reaches minimum before $n_p &gt;= N/2$. This lead us to the following simple algorithm:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">np = <span class="number">0</span>;</div><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;N; i++)</div><div class="line">&#123;</div><div class="line">  np += n[i];</div><div class="line">  <span class="keyword">if</span> (np &gt;= N/<span class="number">2</span>)</div><div class="line">    <span class="keyword">break</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">return</span> i;</div></pre></td></tr></table></figure>
<p>This algorithm effectively reduce the time complexity to O(<em>N</em>). Besides it remove the need of computing $L_t$ and is more simple to implement. The takeaway is that by deep understand the problem and save the intermediate variable ($L_i$ in this example), the computation complexity can be greatly reduced.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/05/programmingpearls/column8/" itemprop="url">
                  Algorithm design techniques (column 8)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-05T19:40:03+08:00" content="2016-08-05">
              2016-08-05
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Notes-of-Programming-Pearls/" itemprop="url" rel="index">
                    <span itemprop="name">Notes of Programming Pearls</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/05/programmingpearls/column8/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/08/05/programmingpearls/column8/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>This column introduces four solutions to solve a small problem. The slowest algorithm takes 15 days when problem size $n = 100000$, the last optimized algorithm only takes 5 milliseconds. The emphasize was the basic ideas and techniques to design algorithms.</p>
<h2 id="Problem-and-Solutions"><a href="#Problem-and-Solutions" class="headerlink" title="Problem and Solutions"></a>Problem and Solutions</h2><p><em>Problem definition:</em> Given a vector <em>x</em> of <em>n</em> floating-point numbers; return the maximum sum found in any contiguous sub-vector of that input.</p>
<h3 id="Solution-1-Brute-force"><a href="#Solution-1-Brute-force" class="headerlink" title="Solution 1: Brute force"></a>Solution 1: Brute force</h3><p>The simplest idea is to iterate over all possible sub-vector, and return the one with maximum sum.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">maxsofar = <span class="number">0</span></div><div class="line"><span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;n; i++)</div><div class="line">  <span class="keyword">for</span> (j=i; j&lt;n; j++)</div><div class="line">  &#123;</div><div class="line">     sum = <span class="number">0</span></div><div class="line">     <span class="keyword">for</span> (k = i; k&lt;j; k++)</div><div class="line">     &#123;</div><div class="line">       <span class="comment">// sum is the sum of x[i..j]</span></div><div class="line">       sum += x[i]</div><div class="line">       maxsofar = max(maxsofar, sum)</div><div class="line">     &#125;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>Time complexity is O($n^3$). In other words, it sucks.</p>
<h3 id="Solution-2-Optimized-brute-force"><a href="#Solution-2-Optimized-brute-force" class="headerlink" title="Solution 2: Optimized brute force"></a>Solution 2: Optimized brute force</h3><p>A clear way to optimize it is as followings:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">maxsofar = <span class="number">0</span></div><div class="line"><span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;n; i++)</div><div class="line">&#123;</div><div class="line">  sum = <span class="number">0</span></div><div class="line">  <span class="keyword">for</span> (j=i; j&lt;n; j++)</div><div class="line">  &#123;</div><div class="line">    <span class="comment">// sum is the sum of x[i..j]</span></div><div class="line">    sum += x[j]</div><div class="line">    maxsofar = max(maxsofar, sum)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>The time complexity of this algorithm is O($n^2$). Not so good, but better than Solution 1.</p>
<p>Another quadratic algorithm use the fact that sum of <em>x[i..j]</em> is equal with <em>x[0..j]</em> - <em>x[0..i]</em>. We can process the vector first to get the cumulative sum until $i^{th}$ element and then use above equation to get <em>x[i..j]</em>.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">maxsofar = <span class="number">0</span></div><div class="line">cumarr[<span class="number">0</span>] = x[<span class="number">0</span>]</div><div class="line"><span class="keyword">for</span> (i=<span class="number">1</span>; i&lt;n; i++)</div><div class="line">  cumarr[i] = cumarr[i<span class="number">-1</span>] + x[i]</div><div class="line"><span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;n; i++)</div><div class="line">  <span class="keyword">for</span> (j=i; j&lt;n; j++)</div><div class="line">  &#123;</div><div class="line">    <span class="comment">// sum is the sum of x[i..j]</span></div><div class="line">    sum = cumarr[j] - cumarr[i]</div><div class="line">    maxsofar = max(maxsofar, sum)</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>This algorithm also takes O($n^2$). Meanwhile, its space complexity is O(n). So it actually is even worse then the above one.</p>
<h3 id="Solution-3-Divide-and-conquer"><a href="#Solution-3-Divide-and-conquer" class="headerlink" title="Solution 3: Divide and conquer"></a>Solution 3: Divide and conquer</h3><p>The idea of divide-and-conquer can be generalized as followings:</p>
<p><em>To solve a problem of size n, recursively solve two subproblems of size n/2, and combine solutions to yield a solution to the complete problem</em>.</p>
<p>So how to use this idea to solve solve our problem ?</p>
<p>We can divide the original vector into sub-vector $a$ and $b$. The maximum contiguous sub-vector must be entirely either in a ($m_a$) or b ($m_b$), or <em>across</em> a and b ($m_c$).</p>
<p>A key question is how to calculate $m_c$. Note $m_c$ can only extend from the split boundary. So $m_c$ is the sum of max sub-vector on left side and that on right side.  </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">float</span> <span class="title">maxsum</span><span class="params">(l, u)</span></span></div><div class="line">&#123;</div><div class="line">  <span class="comment">// Return condition: 0 or 1 element</span></div><div class="line">  <span class="keyword">if</span> (l &gt; u)</div><div class="line">    <span class="keyword">return</span>;</div><div class="line">  <span class="keyword">if</span> (l == u)</div><div class="line">    <span class="keyword">return</span> max(<span class="number">0</span>, x[l])</div><div class="line">  m = (l + u)/<span class="number">2</span></div><div class="line">  lsum = lmax = rsum = rmax = <span class="number">0</span></div><div class="line">  <span class="keyword">for</span> (i=m; i&gt;l; i--)</div><div class="line">  &#123;</div><div class="line">    lsum += x[i]</div><div class="line">    lmax = max(lmax, lsum)</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">for</span> (i=m+<span class="number">1</span>; i&lt;u; i++)</div><div class="line">  &#123;</div><div class="line">    rsum += x[i]</div><div class="line">    rmax = max(rmax, rsum)</div><div class="line">  &#125;</div><div class="line">  ma = maxsum(l, m)</div><div class="line">  mb = maxsum(m+<span class="number">1</span>, u)</div><div class="line">  mc = lmax + rmax</div><div class="line">  <span class="keyword">return</span> max(ma, mb, mc)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>This reduces the time-complexity to O($nlog(n)$).</p>
<h3 id="Solution-4-Scanning"><a href="#Solution-4-Scanning" class="headerlink" title="Solution 4: Scanning"></a>Solution 4: Scanning</h3><p>Over quite a long period of time, people think solution 3 is the optimal, until Jay Kadane sketch the following scanning algorithm that can solve the problem in in O($n$).</p>
<p>The principle of scanning algorithm can be generalized as followings:</p>
<p><em>Suppose you have solved the problem for x[0..i-1]; extend that solution to include x[i]</em></p>
<p>So the idea to solve the problem is: the max contiguous sub-vector is either in x[0..i-1] (store in <em>maxsofar</em>), or ends at position <em>i</em> (store in <em>maxending</em>). This results in following algorithm:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">maxsofar = <span class="number">0</span></div><div class="line">maxending = <span class="number">0</span></div><div class="line"><span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;n; i++)</div><div class="line">&#123;</div><div class="line">  maxending = max（maxending + x[i]， maxending)</div><div class="line">  maxsofar = max(maxsofar, maxending)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>What an elegant algorithm ! It is surprising that Jay Kadane came up with the idea in less than one minute. This sharp insight can only come from years of hard training in algorithm thinking.</p>
<h2 id="Takeaway"><a href="#Takeaway" class="headerlink" title="Takeaway"></a>Takeaway</h2><ol>
<li>Save states to avoid re-computation. We can see the importance of doing so again and again in algorithm design (e.g, the elevator scheduling algorithm).</li>
<li>Preprocess information about data structure. What if we can store data in binary tree or a heap ? Is that gonna shorten the searching time?</li>
<li>Divide-and-conquer: a powerful tool to reduce the size of problem.</li>
<li>Scanning algorithm：seems particularly useful if input data structure is array.</li>
<li>Lower-bound: what is the lower bound of the complexity? How to reach that lower bound ?</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/04/beautyofprogramming/1_5/" itemprop="url">
                  Find missing elements
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-04T11:32:46+08:00" content="2016-08-04">
              2016-08-04
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/The-Art-of-Algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">The Art of Algorithm</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/04/beautyofprogramming/1_5/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/08/04/beautyofprogramming/1_5/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><em>Problem: Given an array where every element appear twice except one. Find that only element which appears only once.</em></p>
<p><strong>Solution:</strong> The simplest idea is to iterator over the array and record how many times an element appear. Time and space-complexity are both O(N).</p>
<p>Clearly, it is possible to  reduce space-complexity.</p>
<p><strong>Idea1:</strong> if one element has already appeared twice, we can delete that element. In this case worst case space-complexity is still O(N), but best case is O(1).</p>
<p><strong>Idea2:</strong> If we want to strictly reduce the space-complexity to O(1), then we need a parameter that can save the status of all seen element.</p>
<p>If all elements have appeared twice, then <em>xor</em> operation over all elements in the array should return zero. Otherwise it should return the missing element. This solution is optimal in both time and space.</p>
<p><em>Further thinking: what if there are two elements missing ? What bout </em>N<em> elements missing?</em></p>
<p>Assuming if <em>x</em> and <em>y</em> are missing. Then <em>xor</em> over all elements in the array will return x <em>xor</em> y. Unfortunately we still do not know x and y. So there is no particularly good way to solve this problem.</p>
<p>However, if the array <em>pre-defined</em> (the original complete array is known), then it is possible to find the missing elements in O(N) time and O(1) space. We can simply add all the elements in the original array, and see the difference with the sum of incomplete array. Assuming the difference is <em>a</em>, then we have:</p>
<pre><code>x + y = a
</code></pre><p>We can easily construct another equation with x and y, like the difference square sum. With these two equations we can derive x and y directly.</p>
<p>Likewise, if there are N elements missing we only have to construct N equations (maybe hard to though).</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/03/programmingpearls/column7/" itemprop="url">
                  The Back of the envelop (column 7)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-03T21:23:47+08:00" content="2016-08-03">
              2016-08-03
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Notes-of-Programming-Pearls/" itemprop="url" rel="index">
                    <span itemprop="name">Notes of Programming Pearls</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/03/programmingpearls/column7/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/08/03/programmingpearls/column7/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>“Back of the envelop” is a powerful tool to quickly estimate the value of parameter. This column introduce basic principles to perform this kind of estimation.</p>
<h2 id="Basic-skills"><a href="#Basic-skills" class="headerlink" title="Basic skills"></a>Basic skills</h2><p>Let us start with an example: how to estimate the flows out of Mississippi River every year ?</p>
<p>We can consider this problem as following: the river was about 1 mile wide, 20 feet deep, and the rate of flow was 5 miles an hour (or a 120 miles a day), that gives:</p>
<pre><code>1 mile * 1/250 mile * 120 miles/day = 1/2 mile^3/day
</code></pre><p>Here comes the basic idea of “back of envelop” calculation: ignoring the complex variable, focusing on the key parameters, come up with a simple mathematical equation and calculate the value according to some common knowledge (1 mile wide is a reasonable guess, 20 meters clearly is not).</p>
<p>Here are some basic rules we can adopt in estimation.</p>
<h3 id="Dimension-check"><a href="#Dimension-check" class="headerlink" title="Dimension check"></a>Dimension check</h3><p>If not sure whether the estimation is accurate or not, we should first check the dimension. In above example, multiplying</p>
<pre><code>mile * mile * mile/day = mile^3/day
</code></pre><p>So the result has the right form.</p>
<h3 id="Rule-of-72"><a href="#Rule-of-72" class="headerlink" title="Rule of 72"></a>Rule of 72</h3><p>Assuming a variable is increasing by <em>r</em> percent per year, after <em>y</em> years how many does the variable increases ? The rule of 72 tells us that if <code>r*y=72</code>, then the variable will roughly double. For example, say you save $1000 in the back. The interest was 6% per year, then after 12 years gives $2012.</p>
<p>Another example: a problem takes 10 seconds to solve a problem of size $n=40$, increase $n$ by one increase the run time by 12 percent. How long does the program take when $n=160$ ?</p>
<p>Rule of 72 tell us run time doubles when n increase 6. So it double 20 times after n increase to 160. Double 20 times is about $10^6$ increase ($2^{20} \approx 10^6$). So the problem takes $10^7$ seconds to solve when $n=160$.</p>
<p>How long exactly is $10^7$ seconds ? To estimate that we introduce another handy rule:</p>
<pre><code>Pi seconds is a nanocentury.
</code></pre><p>So $\pi$ second is about $10^{-9}$ seconds. $10^7$ seconds is like 1 year/$\pi$ which is almost 4 month.</p>
<h3 id="Little’s-Law"><a href="#Little’s-Law" class="headerlink" title="Little’s Law"></a>Little’s Law</h3><p>Little law says that the average number of things in the system is the product of the average rate at which things leave the system and the average time each one spends in the system.</p>
<p>While looks complex, this rule is actually surprisingly simple in use. For example you are waiting in line outside of a club, how long do you have to wait to get in that club ? You can estimate that the club holds 60 people, averagely everyone spend 3 hour in it, so approximately 20 people leave that club per hour. Assuming 20 people are in front of you, then you can estimate you have to wait one hour to get in.</p>
<h2 id="Takeaway"><a href="#Takeaway" class="headerlink" title="Takeaway"></a>Takeaway</h2><p>As Einstein says:</p>
<pre><code>Everything should be made as simple as possible, but not simpler.
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/02/programmingpearls/column6/" itemprop="url">
                  Perspective of performance (column 6)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-02T19:18:20+08:00" content="2016-08-02">
              2016-08-02
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Notes-of-Programming-Pearls/" itemprop="url" rel="index">
                    <span itemprop="name">Notes of Programming Pearls</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/02/programmingpearls/column6/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/08/02/programmingpearls/column6/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>This column introduces <em>design levels</em> at which computer system is built, and the optimization of run-time efficiency on these levels with an example of <em>n-body problem</em>.</p>
<h2 id="n-body-problem"><a href="#n-body-problem" class="headerlink" title="n-body problem"></a>n-body problem</h2><p>The <em>n-body problem</em> simulate motions of <em>n</em> objects in three-dimensional space, given their masses, positions, velocities and etc.</p>
<p>Appel designed an efficient program that reduce the run-time from 1 year to 1 day ($n=10000$). The following table summarize modification on different design levels and corresponding speed up.</p>
<table>
<thead>
<tr>
<th>Design Levels</th>
<th style="text-align:center">Speedup factor</th>
<th style="text-align:center">Modification</th>
</tr>
</thead>
<tbody>
<tr>
<td>Algorithms and Data Structures</td>
<td style="text-align:center">12</td>
<td style="text-align:center">Binary tree reduces O($n^2$) to O($nlog(n)$)</td>
</tr>
<tr>
<td>Algorithm Tuning</td>
<td style="text-align:center">2</td>
<td style="text-align:center">Larger time steps</td>
</tr>
<tr>
<td>Data Structure Reorganization</td>
<td style="text-align:center">2</td>
<td style="text-align:center">Produce clusters well-suited to tree algorithm</td>
</tr>
<tr>
<td>Code Tuning 1</td>
<td style="text-align:center">2</td>
<td style="text-align:center">Using single precision floating point</td>
</tr>
<tr>
<td>Code Tuning 2</td>
<td style="text-align:center">2.5</td>
<td style="text-align:center">Recode critical function in assembly</td>
</tr>
<tr>
<td>Hardware</td>
<td style="text-align:center">2</td>
<td style="text-align:center">Use a floating point accelerator</td>
</tr>
<tr>
<td>Total</td>
<td style="text-align:center">400</td>
</tr>
</tbody>
</table>
<p>Note the speedup was not free. The simple algorithm uses a few dozens of code while the fast program required 1200 lines.</p>
<h2 id="Design-levels"><a href="#Design-levels" class="headerlink" title="Design levels"></a>Design levels</h2><p>A computer system is designed at levels ranging from high-level software structure down to the hardware. Specifically:</p>
<p><em>Problem Definition:</em> We have seen the importance of defining problem in column 1.</p>
<p><em>System structure:</em>  A designer should do a “back-of-the-envelope” (see Column 7) estimate to make sure the performance is in the right ballpark.</p>
<p><em>Algorithms and Data Structures:</em> Needless to say.</p>
<p><em>Code tuning:</em> Do not worth trying it in most cases.</p>
<p><em>System Software:</em> Most likely do not have to worry about it neither.</p>
<p><em>Hardware:</em> Faster hardware can increase performance.</p>
<h2 id="Takeaway"><a href="#Takeaway" class="headerlink" title="Takeaway"></a>Takeaway</h2><ol>
<li>Focus on the design level that might bring the largest speedup first (especially data structure/algorithm).</li>
<li>Work at many levels if a big speedup is required.</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/02/pythontips/forloop/" itemprop="url">
                  For loop in python
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-02T12:23:35+08:00" content="2016-08-02">
              2016-08-02
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Programming-tricks/" itemprop="url" rel="index">
                    <span itemprop="name">Programming tricks</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/02/pythontips/forloop/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/08/02/pythontips/forloop/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Today I try to implement heap sort, and has to iterate over an array like following:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// n is array size</span></div><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = n; i &gt; <span class="number">0</span>; i=i/<span class="number">2</span>)</div><div class="line">  <span class="comment">// do stuff</span></div></pre></td></tr></table></figure>
<p>This looks quite concise and elegant. However, I found that in Python we can only use <code>while</code> loop to do the same thing:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">i = n</div><div class="line"><span class="keyword">while</span> (i &gt; <span class="number">0</span>):</div><div class="line">  <span class="comment"># do stuff</span></div><div class="line">  i = i/<span class="number">2</span></div></pre></td></tr></table></figure>
<p>This involves two additional lines. After consulting people on a tech forum, I realized that the reason that python does not support <code>for</code> loop as in other language was that python regard <code>for</code> as a way to iterate over every element in a list. So if really need the one line <code>for loop</code>, we could define a iterator as followings：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">cut_in_half_until_zero</span><span class="params">(n)</span>:</span></div><div class="line">    <span class="keyword">while</span> n &gt; <span class="number">0</span>:</div><div class="line">        <span class="keyword">yield</span> n  <span class="comment"># Iterator</span></div><div class="line">        n = n // <span class="number">2</span></div><div class="line"> </div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> cut_in_half_until_zero(<span class="number">100</span>):</div><div class="line">    print(i)  <span class="comment"># 100, 50, 25, 12, 6, 3, 1</span></div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/01/programmingpearls/column5/" itemprop="url">
                  A small matter of programming (column 5)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-01T18:26:59+08:00" content="2016-08-01">
              2016-08-01
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Notes-of-Programming-Pearls/" itemprop="url" rel="index">
                    <span itemprop="name">Notes of Programming Pearls</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/01/programmingpearls/column5/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/08/01/programmingpearls/column5/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>We have discussed how to define the right problem, choose algorithm and data structure. Also, we have used program verification to write elegant pseudocode. The last thing to do, is just a small matter of programming.</p>
<p>This column introduce several important techniques of producing correct code for binary search. Here we focus on two of them: <strong>assertion</strong> and <strong>automatic testing</strong>.</p>
<h2 id="The-art-of-assertion"><a href="#The-art-of-assertion" class="headerlink" title="The art of assertion"></a>The art of assertion</h2><p>We can use <code>assert</code> to state that we believe a logical expression is true. The statement of <code>assert(n&gt;=0)</code> will raise an error if <em>n</em> is negative, otherwise it do nothing. In binary search, we want to make sure that the (1) the input array is sorted; (2) every iteration the range of array decreases. So we can insert following <code>assert</code> statement:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">bsearch</span><span class="params">(arr, t, lo, hi)</span>:</span></div><div class="line">    <span class="string">'''</span></div><div class="line">    Binary search, return position of value t if found, otherwise return -1</div><div class="line">    '''</div><div class="line">    oldsize = size</div><div class="line">    size = hi - lo + <span class="number">1</span></div><div class="line"></div><div class="line">    <span class="keyword">assert</span>(size &lt; oldsize) <span class="comment"># Making sure range decreases every iteration</span></div><div class="line">    <span class="keyword">assert</span>(sorted(arr))  <span class="comment"># Making sure arr is sorted</span></div><div class="line">    <span class="keyword">if</span> hi &lt; lo:</div><div class="line">        <span class="keyword">return</span> <span class="number">-1</span></div><div class="line"></div><div class="line">    mid = (lo + hi)/<span class="number">2</span></div><div class="line">    <span class="keyword">if</span> (arr[mid] &gt; t):</div><div class="line">        bsearch(arr, t, lo, mid<span class="number">-1</span>)</div><div class="line">    <span class="keyword">elif</span> (arr[mid] &lt; t):</div><div class="line">        bsearch(arr, t, mid+<span class="number">1</span>, hi)</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        <span class="keyword">return</span> mid</div></pre></td></tr></table></figure>
<h2 id="Automated-testing"><a href="#Automated-testing" class="headerlink" title="Automated testing"></a>Automated testing</h2><p>An ideal testing for binary search should cover empty array, common sizes (0,1,2), several powers of 2 and etc. Automated testing can save us from the dreadful boring manual testing.</p>
<p>First we use following script to examine the case where all elements are distinct.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">autotest1</span><span class="params">()</span>:</span></div><div class="line">    <span class="string">'''</span></div><div class="line">    Test distinct elements (plus one at end)</div><div class="line">    '''</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, n+<span class="number">1</span>):</div><div class="line">        arr[i] = <span class="number">10</span>*i</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, n):</div><div class="line">        <span class="comment"># The input is different from above function</span></div><div class="line">        <span class="keyword">assert</span>(bsearch(<span class="number">10</span>*i)     == i)</div><div class="line">        <span class="keyword">assert</span>(bsearch(<span class="number">10</span>*i - <span class="number">5</span>) == <span class="number">-1</span>)</div><div class="line">    <span class="keyword">assert</span>(bsearch(<span class="number">10</span>*n<span class="number">-5</span>) == <span class="number">-1</span>)</div><div class="line">    <span class="keyword">assert</span>(bsearch(<span class="number">10</span>*n)   == <span class="number">-1</span>)</div></pre></td></tr></table></figure>
<p>Next we examine an array of equal elements:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">autotest2</span><span class="params">()</span>:</span></div><div class="line">    <span class="string">'''</span></div><div class="line">    Test equal elements</div><div class="line">    '''</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, n):</div><div class="line">        arr[i] = <span class="number">10</span></div><div class="line">    <span class="keyword">if</span> n == <span class="number">0</span>:</div><div class="line">        <span class="keyword">assert</span>(bsearch(<span class="number">10</span>) == <span class="number">-1</span>)</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        <span class="keyword">assert</span>(<span class="number">0</span> &lt;= bsearch(<span class="number">10</span>) &lt; n)</div><div class="line">    <span class="keyword">assert</span>(<span class="number">5</span>) == <span class="number">-1</span></div></pre></td></tr></table></figure>
<h2 id="Takeaway"><a href="#Takeaway" class="headerlink" title="Takeaway"></a>Takeaway</h2><ol>
<li>Sketch a hard function in a convenient high-level pseudocode, then translate it into implementation language.</li>
<li>Assert played a key role in making sure the run-time behavior of code matches our understanding.</li>
<li>Testing of function can be done much easily alone than in a large system.</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/31/programmingpearls/column4/" itemprop="url">
                  Writing correct program (column 4)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-07-31T08:09:00+08:00" content="2016-07-31">
              2016-07-31
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Notes-of-Programming-Pearls/" itemprop="url" rel="index">
                    <span itemprop="name">Notes of Programming Pearls</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/31/programmingpearls/column4/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/07/31/programmingpearls/column4/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>This column introduce techniques to verify program correctness using an example of binary search problem.</p>
<h2 id="Binary-search"><a href="#Binary-search" class="headerlink" title="Binary search"></a>Binary search</h2><p><em>Problem definition:</em> Determine whether a sorted array <em>x[0..n-1]</em> contains element <em>t</em>.</p>
<p><em>Solution:</em> This is a classical problem that can be solved using binary search. The idea is to check the middle element of array <em>x[mid]</em>. If <em>t&lt;x[mid]</em> then <em>t</em> must be on the left side of <em>x[mid]</em>, otherwise right side. So we can recursively search for <em>t</em> in smaller range, until we finally find <em>t</em> (or return -1 if it does not exist).</p>
<p><em>Code:</em><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">bsearch</span><span class="params">(arr, t, lo, hi)</span>:</span></div><div class="line">    <span class="string">'''</span></div><div class="line">    Binary search, return position of value t if found, otherwise return -1</div><div class="line">    '''</div><div class="line">    <span class="keyword">if</span> hi &lt; lo:</div><div class="line">        <span class="keyword">return</span> <span class="number">-1</span></div><div class="line"></div><div class="line">    mid = (lo + hi)/<span class="number">2</span></div><div class="line">    <span class="keyword">if</span> (arr[mid] &gt; t):</div><div class="line">        bsearch(arr, t, lo, mid<span class="number">-1</span>)</div><div class="line">    <span class="keyword">elif</span> (arr[mid] &lt; t):</div><div class="line">        bsearch(arr, t, mid+<span class="number">1</span>, hi)</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        <span class="keyword">return</span> mid</div></pre></td></tr></table></figure></p>
<h2 id="Program-Verification"><a href="#Program-Verification" class="headerlink" title="Program Verification"></a>Program Verification</h2><p>Now we walk through it by verify each step in the code behaves exactly as we thought.</p>
<p>We search for $t$ by shrinking a range <code>[lo, hi]</code> that contains <em>t</em>. Initially <code>lo = 0</code>, <code>hi = n-1</code>, so <em>t</em> must lies between <code>[lo, hi]</code> if it exists.</p>
<p>Next we come into the loop. If <em>lo &gt; hi</em>, then there is no element between <code>[lo, hi]</code>. Thus <em>t</em> does not present in the array and we can return -1. Otherwise we check middle element <code>x[mid]</code>. If <code>t &lt; x[mid]</code>, then <em>t</em> must lies between <code>[lo, mid-1]</code>. If <code>t &gt; x[mid]</code>, then we can search in the range <code>[mid+1, hi]</code>. If <code>t = x[mid]</code>, then we have found  <em>t</em> and can return the position.</p>
<p>After one iteration is finished, there are only three results: (1) <em>t</em> does not exist, return -1; (2) found <em>t</em>, return position; (3) <em>t</em> not found, search in the new range (with smaller size) where <em>t</em> should in.</p>
<p>From above analysis we see that: (1) in each loop iteration is established；(2) each iteration preserve the truth (<em>t</em> must falls in the range between <code>[lo, hi]</code>); (3) the desired results is true (-1 if not exist, otherwise return position). Therefore we are confident that above code can output right answer.</p>
<h2 id="Takeaway"><a href="#Takeaway" class="headerlink" title="Takeaway"></a>Takeaway</h2><ol>
<li>Verify correctness of loop: <em>Initialization</em> (loop invariant is well established), <em>Preservation</em> (truth is preserved during iteration) and <em>Termination</em> (desired result is obtained when terminates)</li>
<li>Verify correctness of function: <em>precondition</em>: state mush be true before function called. <em>postcondition:</em> what function guarantee on termination.</li>
<li>Resist the stupid idea to “just change it until it works”, make sure to understand the code at all time.</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/content/images/avatar.jpg"
               alt="Fan Zhou" />
          <p class="site-author-name" itemprop="name">Fan Zhou</p>
          <p class="site-description motion-element" itemprop="description">A lifelong learner's blog</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">14</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Fan Zhou</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  

    <script type="text/javascript">
      var disqus_shortname = 'fanzhoulll';
      var disqus_identifier = 'index.html';
      var disqus_title = "";
      var disqus_url = '';

      function run_disqus_script(disqus_script){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');
      
    </script>
  




  
  

  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>
  <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="custom_mathjax_source">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->


  

  

</body>
</html>
