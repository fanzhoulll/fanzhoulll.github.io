<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="Ph.D @ Northeastern">
<meta property="og:type" content="website">
<meta property="og:title" content="Fan Zhou">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Fan Zhou">
<meta property="og:description" content="Ph.D @ Northeastern">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Fan Zhou">
<meta name="twitter:description" content="Ph.D @ Northeastern">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/"/>

  <title> Fan Zhou </title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  










  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Fan Zhou</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/16/modelthinking/week2/" itemprop="url">
                  Week 2 Aggregation & Decision models
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-09-16T16:42:23-04:00" content="2016-09-16">
              2016-09-16
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Open-Class-Notes/" itemprop="url" rel="index">
                    <span itemprop="name">Open Class Notes</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/09/16/modelthinking/week2/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/09/16/modelthinking/week2/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Aggregation-more-is-different"><a href="#Aggregation-more-is-different" class="headerlink" title="Aggregation - more is different !"></a>Aggregation - more is different !</h2><h3 id="Aggregation-of-numbers"><a href="#Aggregation-of-numbers" class="headerlink" title="Aggregation of numbers"></a>Aggregation of numbers</h3><blockquote>
<p>Very often airline company sell tickets more than their actual capacity. Why would not they afraid of overbook ?</p>
</blockquote>
<p><strong>Centralized Limit Theorem:</strong> if we add up a bunch of individual, decisions made by $N$ individuals (like should went to the airport or not), then the distribution of final result gonna look like a bell curve looks like following.</p>
<p>The bell curve can be described with mean value $\mu = p<em>N$ and standard deviation $\sigma = \sqrt{p(1-p)</em>N}$, where $p$ is the probability of certain decision and $N$ is the individuals numbers.  </p>
<p>From above figure we can see:</p>
<blockquote>
<p>+- $\sigma$: 68%<br>+- 2<em>$\sigma$: 95%<br>+- 3</em>$\sigma$: 99.75%<br>…<br>+- 6*$\sigma$: 99.999966%</p>
</blockquote>
<p>Note +- 6*$\sigma$ is often used in quality control - it answers what is the acceptable deviation of each sample quality to satisfy <em>six sigma</em> standard.</p>
<p><em>This explains why most of us are just so normal – we are bounded between the +-$\sigma$ !</em></p>
<p>Now considering the above quesion:</p>
<blockquote>
<p>Assuming Boeing 747 have 380 seats. They estimate 90% show up rate. What is probability of selling more tickets than showing up passengers if selling 400 tickets ?</p>
</blockquote>
<p>Average number of showing people is $400<em>0.9 = 360$. Standard deviation is $\sqrt{0.9</em>0.1<em>400} = 6$. Since $380 &gt; 360 + 3</em>\sigma$, there is over 99.75% probability that Boeing won’t overbook.</p>
<h2 id="Aggregation-of-Rules"><a href="#Aggregation-of-Rules" class="headerlink" title="Aggregation of Rules"></a>Aggregation of Rules</h2><blockquote>
<p>Would things as complex as brain, stock market or even life, are actually formed by incredibly simple bits and rules ?</p>
</blockquote>
<p><strong>Game of life:</strong> Consider infinite cells on a plane. Cells can either be alive (on) or dead (off). Given following rules:</p>
<ol>
<li>If off, turn on if exactly 3 neighbors are on.</li>
<li>If on, stay on if 2 or 3 neighbors are on, otherwise turn off.</li>
</ol>
<p>Turns out a bunch of patterns would occur given these two simple rules and a initial cell status. Following figure shows the gliding of a pattern:</p>
<p>It is called <em>game of life</em> because it looks just like the evolving of life. Isn’t this fascinating ?</p>
<p><strong>Cellular automate</strong>: Consider one dimensional situation. Where the on or off of certain cell decides on the status of its two neighbors. In this case it is possible to explore the results all possible rules (since there are only $2^8=256$ rules).  </p>
<blockquote>
<p>While this is not particular interesting, following figure can help us understand better how the rules are formed. Each rule is defined as the sum of collections of 8 <em>atom rules</em>. So the rule can be simply expressed as a binary vector. For example Rule 30 = 00011110, which denote the combination of <em>atom rule</em> 2,4,8,16.</p>
</blockquote>
<p>Wolfram classify the outcomes of 256 rules into four classes in his 1000 page book (he also develop Mathmatic, in his spare time while writing book I think): <em>fix</em>, <em>alternation</em>, <em>randomness</em> and <em>complex</em>.</p>
<p>Langton find that the possibilities of chaos results is related with the number of “on” bits in the rules (denote by $\lambda$). Following figure summarize the results. It turns out the moderate interdependence ($\lambda$ close to average) lead to the highest randomness !</p>
<p><strong>What it tell us:</strong></p>
<ol>
<li>Simple bits and rules can form any complex things only if…</li>
<li>We add some interdependency between them !</li>
</ol>
<blockquote>
<p>This explains why the stock market looks so crazy. Fundamentally, stock market is influenced by millions decisions of traders. However these decisions are correlated. If stock price going down, people start selling and hence further degrade the stock price – same thing applies when stock price raise up.</p>
</blockquote>
<h2 id="Aggregation-of-Preference"><a href="#Aggregation-of-Preference" class="headerlink" title="Aggregation of Preference"></a>Aggregation of Preference</h2><blockquote>
<p> How does US citizens end up have to choose next their president from Hillary and Trump, even if they hate both ?</p>
</blockquote>
<p>Following toy example can explain: assuming three people have three difference preferences over apple, banana and coconuts.</p>
<p>Assuming through pairwise comparison, we can get following aggregated preference:</p>
<blockquote>
<p>Coconut &gt; Apple<br>Banana &gt; Coconut<br>Apple &gt; Banana</p>
</blockquote>
<p>Clearly this preference is <em>irrational</em>. because if coconut &gt; apple and banana &gt; coconut, then banana should &gt; apple (we call this transition).</p>
<p>This is called <strong>Voting paradox:</strong>  even if each personal is perfect rational when voting for their preference, the collective result might <strong>not be rational</strong>  at all !</p>
<h2 id="Decision-tree"><a href="#Decision-tree" class="headerlink" title="Decision tree"></a>Decision tree</h2><blockquote>
<p>How to make better decision ? How to predict other people’s decision according to their preference ?</p>
</blockquote>
<p><strong>Multi-Criterion Decision making:</strong> Easy to understand with an example.</p>
<p> Say I want to buy a house and should decide between house A and house B. What I can do is to list all <em>factors</em> that influence our choice. Each <em>factor</em> is associated with <em>weight</em>, which denote how much do we care about the <em>factor</em>. Then by simply added up the total credits for house A and house B can we make the decision !</p>
<blockquote>
<p>It is possible, that after listing and calculating, we should choose house A. But somehow we just feel like choosing house B. This means that you might have ignored other important elements that influence your choice.</p>
</blockquote>
<p><strong>Spatial Choice Models:</strong> This is useful when we have already got an <em>ideal</em> candidate in mind. Also easy to understand with another example.</p>
<p>Now we have to decide which burger restaurant to go. We can first quantitively list our expectation of all elements of the perfect burger. And then we list the actual elements of candidates and calculate the total |DIFFs| between the candidates and our expectation. After that we simply choose the one with smaller |DIFF|.  </p>
<p>This model can also be used to infer the preference of other people. For example, say if a friend choose Big Mac. Then according to following table it is quite easy to infer that he like either patties or pickles or really hate tomatoes.</p>
<p><strong>Decision Tree:</strong> My personal favorite. It deal with following questions:</p>
<blockquote>
<p>How to you choose when things have multiple branches ?</p>
</blockquote>
<p>Let us take a look at example.</p>
<blockquote>
<p>You want to buy ticket for a movie. Two choices: 3pm ticket for $200, but 40% won’t make it. Or buying 4pm ticket for $400. Which one do you choose ?</p>
</blockquote>
<p>The tradeoff of this dilemma can be made vividly clear by decision tree:</p>
<p>So the potential cost of buying 3pm ticket is $0.6<em>600 + 0.4</em>600 = 360$. Since it is lower then the cost of 4pm ticket, we should buy 3pm one !</p>
<p><strong>Key idea:</strong> draw the branches of every choice and calculate the reward of each branch backwardly.</p>
<p>Finally, decision tree can also be used to calculate the <strong>value of information</strong>. The idea is to：</p>
<ol>
<li>Calculate value without information</li>
<li>Calculate value with information</li>
<li>Calculate the difference</li>
</ol>
<p>For example:</p>
<blockquote>
<p>You want to get a car. Option A: buy a car. Option B: rent for $500 every month. You have 40% chance that car company provide $1000 cash back starting next month. Now someone told you: I work for the company and can tell you whether you win it or not. How much do you think that information worth ?</p>
</blockquote>
<p>We first calculate the value without information. Note we got two choices: if we rent the value is $4<em>500 + 0.6</em>(-500) = -100$, if we buy value is 0. So we should choose to buy the car, which will give us 0.</p>
<p>Then we calculate the cost with information. Two possibilities: we win the cash back, then definitely we will rent the car and get $500 (every month). Otherwise we can always buy the car and loss nothing. So the value is $0.4*500 = 200$</p>
<p>As a result, the information of worth $200. So it still worth it if the guy charges you $100 for that information ;-)</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/28/programmingpearls/column13/" itemprop="url">
                  Search (column 13)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-28T21:07:38-04:00" content="2016-08-28">
              2016-08-28
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Notes-of-Programming-Pearls/" itemprop="url" rel="index">
                    <span itemprop="name">Notes of Programming Pearls</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/28/programmingpearls/column13/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/08/28/programmingpearls/column13/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>Actually, this column is not about search, but about the implementation of a data structure <em>set</em>, which is useful in many search applications, e.g, check if a given number exists in a list of integers.</p>
<h2 id="Implementation"><a href="#Implementation" class="headerlink" title="Implementation"></a>Implementation</h2><p><em>Set</em> is a collection of unique elements. We are focusing on ordered integer <em>set</em> here. So the elements are sorted integers. The main API is <code>insert()</code>, which is used to insert the item in correct position of the set if it not exists.</p>
<p><em>Set</em> can be implemented with many representations. Here we give the implementation of <code>insert()</code> with (1) array, (2) linked list, (3) binary search tree and (4) bitmap. Then we summarize the time complexity of each operation (<em>insert</em>, <em>search</em>, <em>report</em>) with different representations.</p>
<h3 id="Sorted-Array"><a href="#Sorted-Array" class="headerlink" title="Sorted Array"></a>Sorted Array</h3><p>Very straightforward and easy to implement.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">insert</span><span class="params">(self, new_data)</span>:</span></div><div class="line">    i = <span class="number">0</span></div><div class="line">    <span class="keyword">while</span> i &lt; len(self.arr):</div><div class="line">        <span class="keyword">if</span> self.arr[i] == new_data:</div><div class="line">            <span class="keyword">return</span></div><div class="line">        <span class="keyword">if</span> self.arr[i] &gt; new_data:</div><div class="line">            <span class="keyword">break</span></div><div class="line">        i += <span class="number">1</span></div><div class="line">    self.arr.insert(i, new_data)</div><div class="line">    self.size += <span class="number">1</span></div><div class="line">    <span class="keyword">return</span></div></pre></td></tr></table></figure>
<p>The problem is that when we insert a new element at position <em>i</em> we have to re-allocate the space for all the existing elements after <em>i</em>, which requires O($n$) time and space ($n$ is set size). This can be avoided with linked list representation.</p>
<h3 id="Linked-List"><a href="#Linked-List" class="headerlink" title="Linked List"></a>Linked List</h3><p>The most elegant way of doing insert with a sorted linked list is to use recursion:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">rinsert</span><span class="params">(self, node, new_data)</span>:</span></div><div class="line">    <span class="comment"># Recursively add new data in sorted order if it does not exist</span></div><div class="line">    <span class="keyword">if</span> <span class="keyword">not</span> node:</div><div class="line">        node = LinkedListNode(new_data, <span class="keyword">None</span>)</div><div class="line">        <span class="keyword">return</span> node</div><div class="line">    <span class="keyword">if</span> node.data &lt; new_data:</div><div class="line">        node.next = self.rinsert(node.next, new_data)</div><div class="line">    <span class="keyword">elif</span> node.data &gt; new_data:</div><div class="line">        node = LinkedListNode(new_data, node)</div><div class="line">    <span class="keyword">return</span> node</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">insert</span><span class="params">(self, new_data)</span>:</span></div><div class="line">    self.list.head = self.rinsert(self.list.head, new_data)</div></pre></td></tr></table></figure>
<p>We can further reduce the complexity of <code>insert</code> to $O(log(n))$ with tree structure.</p>
<h3 id="Binary-Search-Tree"><a href="#Binary-Search-Tree" class="headerlink" title="Binary Search Tree"></a>Binary Search Tree</h3><p>Again, recursion is probably the easiest implementation in BST.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">rinsert</span><span class="params">(self, node, new_data)</span>:</span></div><div class="line">    <span class="keyword">if</span> <span class="keyword">not</span> node:</div><div class="line">        node = BstNode(data=new_data)</div><div class="line">        <span class="keyword">return</span> node</div><div class="line">    <span class="keyword">if</span> node.data &lt; new_data:</div><div class="line">        node.right = self.rinsert(node.right, new_data)</div><div class="line">    <span class="keyword">elif</span> node.data &gt; new_data:</div><div class="line">        node.left = self.rinsert(node.left, new_data)</div><div class="line">    <span class="keyword">return</span> node</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">insert</span><span class="params">(self, new_data)</span>:</span></div><div class="line">    self.head = self.rinsert(self.head, new_data)</div></pre></td></tr></table></figure>
<p>While this looks efficient, we can actually achieve O(1) <code>insert</code> with bitmap if the maximum integer in the set is known.</p>
<h3 id="Bitmap"><a href="#Bitmap" class="headerlink" title="Bitmap"></a>Bitmap</h3><p><a href="https://fanzhoulll.github.io/2016/07/27/programmingpearls/column1/" target="_blank" rel="external">Bitmap</a>  is our old friend. Bitmap allows us to insert new element in $O(1)$. However, the binary bit vector is not supported in high-level language. So we first have to represent bitmap with integer array.</p>
<p>Note we can save any bit vector with its decimal representation. For example, we can simply use integer 3 to represent bits vector (<code>0011</code>), thus saving two numbers (1 and 2, denoted by the position of <code>1</code> in bit vector). Assuming one integer takes 4 byte (32 bits) in memory (just an example). Then saving a bitmap with maximum value $m$ requires $1+m/32$ integers.</p>
<p>Next let us see how to save new integer <em>i</em> in bitmap. What we actually need to do is to <em>flip</em> the <em>i</em>‘s bit in the bitmap. We can do this by modifying the <em>i/32</em>‘s number in the array by setting <em>i%32</em>‘s bit in the number to be 1. This can simply be done by using <code>or</code> and <code>shift</code> operation:</p>
<pre><code>x[i&gt;&gt;5] |= (1&lt;&lt;(i &amp; 0x1F))
</code></pre><p>Note <code>i &amp; 0x1F</code> is equal with <code>i % Ox20</code>.</p>
<p>In Python can test the memory usage of a integer by using function <code>sys.getsizeof()</code>. So the <code>insert</code> implementation is:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, max_val=<span class="number">100</span>)</span>:</span></div><div class="line">    self.BITSPERINT = sys.getsizeof(max_val)</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">insert</span><span class="params">(self, new_data)</span>:</span></div><div class="line">    self.bitmap[new_data/self.BITSPERINT] |= (<span class="number">1</span>&lt;&lt;(new_data%self.BITSPERINT))</div></pre></td></tr></table></figure>
<h2 id="Summary-of-the-operation-complexity"><a href="#Summary-of-the-operation-complexity" class="headerlink" title="Summary of the operation complexity"></a>Summary of the operation complexity</h2><p>Assuming set size is $n$ and maximum value is $m$, the time complexity of each operation is summarized as followings:</p>
<table>
<thead>
<tr>
<th>Set Representation</th>
<th style="text-align:right">insert</th>
<th style="text-align:right">search</th>
<th style="text-align:center">report</th>
</tr>
</thead>
<tbody>
<tr>
<td>Sorted array</td>
<td style="text-align:right">$O(n)$</td>
<td style="text-align:right">$O(n)$</td>
<td style="text-align:center">$O(n)$</td>
</tr>
<tr>
<td>Sorted linked list</td>
<td style="text-align:right">$O(n)$</td>
<td style="text-align:right">$O(n)$</td>
<td style="text-align:center">$O(n)$</td>
</tr>
<tr>
<td>Binary Search Tree</td>
<td style="text-align:right">$O(log(n))$</td>
<td style="text-align:right">$O(log(n))$</td>
<td style="text-align:center">$O(n)$</td>
</tr>
<tr>
<td>Bitmap</td>
<td style="text-align:right">$O(1)$</td>
<td style="text-align:right">$O(1)$</td>
<td style="text-align:center">$O(m)$</td>
</tr>
</tbody>
</table>
<h2 id="Takeaway"><a href="#Takeaway" class="headerlink" title="Takeaway"></a>Takeaway</h2><p>Actually, Python has already implemented the <a href="https://docs.python.org/2/library/sets.html" target="_blank" rel="external">set structure</a>. It supported various operations like <code>in</code>, <code>union</code>, `intersection, etc. So next time, try to find a general tool before implementing it yourself :-)</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/19/programmingpearls/column12/" itemprop="url">
                  A Sample Problem (column 11)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-19T02:12:15-04:00" content="2016-08-19">
              2016-08-19
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Notes-of-Programming-Pearls/" itemprop="url" rel="index">
                    <span itemprop="name">Notes of Programming Pearls</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/19/programmingpearls/column12/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/08/19/programmingpearls/column12/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>This column introduces a tiny yet practical problem and two solutions.</p>
<h2 id="Problem-and-first-solution"><a href="#Problem-and-first-solution" class="headerlink" title="Problem and first solution"></a>Problem and first solution</h2><p><em>Problem:</em> Given two numbers <em>m</em> and <em>n</em>, with <em>m&lt;n</em>, output sorted list of <em>m</em> random integers in the range <em>0..n-1</em> with no integers occurs more than once.</p>
<p><em>Solution1:</em> My first reaction is generate a sequence list with <em>0..n-1</em>. Then we shuffle the array and sort the first <em>m</em> elements, which is the required output. The code is simple:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">genshuf</span><span class="params">(m, n)</span>:</span></div><div class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, n):</div><div class="line">    x[i] = i</div><div class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, m):</div><div class="line">    j = randint(i, n<span class="number">-1</span>)</div><div class="line">    swap(i, j)</div><div class="line">  sort(x[<span class="number">0</span>:m])</div><div class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, m):</div><div class="line">    <span class="keyword">print</span> i</div></pre></td></tr></table></figure>
<p>It is easy to see the time complexity is O(n+mlog(m)) and the space complexity is O(n). Can you design a better algorithm?</p>
<h2 id="A-Better-Solution"><a href="#A-Better-Solution" class="headerlink" title="A Better Solution"></a>A Better Solution</h2><p>Donald Knuth develop Algorithm S to solve this problem, reduce the time complexity to O(n) and space complexity to O(1). It is based on the observation that to choose a number from <em>n</em> candidates with probability <em>m/n</em> we can implement following statement:</p>
<pre><code>if (bigrand() % n) &lt; m
   choose number
</code></pre><p>To choose <em>m</em> elements with equal probability $P=m/n$, we choose the first element with probability $P_1=m/n$, then choose the second element with $P_2=(m-1)/(n-1)$ if the first element is chosen, otherwise $P_2=m/(n-1)$. We continue doing so until get <em>m</em> elements. The code is even simpler:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">genKnuth</span><span class="params">(m, n)</span>:</span></div><div class="line">  i = <span class="number">0</span></div><div class="line">  <span class="keyword">while</span> i&lt;n:</div><div class="line">    <span class="comment"># Select m elements in rest n-i</span></div><div class="line">    <span class="keyword">if</span> (bigrand() % (n-i)) &lt; m:</div><div class="line">      <span class="keyword">print</span> i</div><div class="line">      m -= <span class="number">1</span></div><div class="line">    i += <span class="number">1</span></div></pre></td></tr></table></figure>
<p>It it easy to proof the correctness of the algorithm. Note it cannot select more than m elements because <code>bigrand() % (n-i) &gt;= 0</code>. It cannot select fewer because when <code>n-i = m</code> all remaining elements must be chosen (condition <code>bigrand() % (n-i) &lt; m</code> always holds).</p>
<h2 id="Takeaway"><a href="#Takeaway" class="headerlink" title="Takeaway"></a>Takeaway</h2><p>From this problem we can extract four typical steps of problem solving.</p>
<ol>
<li><strong>Understand the problem.</strong> It is the first step towards solution. Trying to state the problem in a clean and crisp way.</li>
<li><strong>Explore the design space.</strong> Do not jump to quickly to the first reaction of the possible solution. Use informal high-level language to help us describe design.</li>
<li><strong>Implement one solution.</strong> Strive to implement the chosen design with most straightforward code.</li>
<li><strong>Retrospect.</strong> There always remains something more to do to improve the design.</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/18/programmingpearls/column11/" itemprop="url">
                  Sorting (column 11)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-18T08:04:54-04:00" content="2016-08-18">
              2016-08-18
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Notes-of-Programming-Pearls/" itemprop="url" rel="index">
                    <span itemprop="name">Notes of Programming Pearls</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/18/programmingpearls/column11/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/08/18/programmingpearls/column11/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>This column introduces how to write <em>good</em> quick sorting algorithm. We start with the basic idea of quick sort and a naive implementation. Then we discuss some problems of the first version algorithm as well as some fix techniques.</p>
<h2 id="Basic-quick-sort"><a href="#Basic-quick-sort" class="headerlink" title="Basic quick sort"></a>Basic quick sort</h2><p>The basic idea of quick sort is <em>divide and conquer</em>. To sort an array we can divide it into two subarrays and recursively sort them. Specifically, we choose an pivotal <em>t</em> and <em>partition</em> the array around it by moving elements smaller than <em>t</em> to the left side of <em>t</em> and greater element to the right side. Then we recursively partition the subarrays on both sides of <em>t</em>. Finally, the entire array is sorted.</p>
<p>With this idea it is quick to write following pseudocode:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">qsort</span><span class="params">(l, u)</span>:</span></div><div class="line">    <span class="keyword">if</span> l &gt;= u:</div><div class="line">      <span class="comment"># at most one element, do nothing</span></div><div class="line">      <span class="keyword">return</span></div><div class="line">    m = partition(l, u)</div><div class="line">    qsort(l, m<span class="number">-1</span>)</div><div class="line">    qsort(m+<span class="number">1</span>, u)</div></pre></td></tr></table></figure>
<p>Next problem is how to partition array around <em>t</em>. In naive implementation, we simply choose the first element of array as pivotal <em>t</em>. Then we scan the array from left to right, and use variable <em>i</em> and <em>m</em> to maintain the following invariant:</p>
<p><img src="/content/images/2016/8/partition1.png" alt="partition1"></p>
<p>When the loop terminate we should have:</p>
<p><img src="/content/images/2016/8/partition2.png" alt="partition2"></p>
<p>Finally we swap <code>x[l]</code> and <code>x[m]</code> to get the partitioned array:</p>
<p><img src="/content/images/2016/8/partition3.png" alt="partition3"></p>
<p>The code for this single-side partition is:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">partion1</span><span class="params">(x, l, u)</span>:</span></div><div class="line">    m = l</div><div class="line">    i = l+<span class="number">1</span></div><div class="line">    <span class="keyword">while</span> i&lt;=u:</div><div class="line">        <span class="string">'''</span></div><div class="line">        Invariant:  arr[l+1 ...m] &lt;  x[l]</div><div class="line">                    arr[m+1..i-1] &gt;= x[l]</div><div class="line">        '''</div><div class="line">        <span class="keyword">if</span> x[i] &lt; x[l]:</div><div class="line">            m += <span class="number">1</span></div><div class="line">            swap(x, m, i)</div><div class="line">        i += <span class="number">1</span></div><div class="line">    swap(x, l, m)</div><div class="line">    <span class="keyword">return</span> m</div></pre></td></tr></table></figure>
<p>The best-case time complexity of quick sorting is O(<em>nlog(n)</em>). To understand why, assuming each partition divide array into two sub-arrays with equal size. The the total run time is:</p>
<pre><code>T(n) = 2*T(n/2) + O(n)
</code></pre><p>where <em>n</em> is the input array size. So we have <em>T(n) = O(nlog(n))</em>. However, this only holds when averagely speaking, the two sub-arrays after partition have equal sizes. Otherwise, the total run time would be much longer, as we will see in following section.</p>
<h2 id="Better-quick-sort"><a href="#Better-quick-sort" class="headerlink" title="Better quick sort"></a>Better quick sort</h2><h3 id="Two-sided-partition"><a href="#Two-sided-partition" class="headerlink" title="Two-sided partition"></a>Two-sided partition</h3><p>When the input array is not random, the above algorithm could lead to much worse performance. For example, assuming the input array has equal elements. Then each element would shift zero position with the above single-side partition. Therefore, the <em>n-1</em> partition use O(<em>n</em>) to remove one element, yield a total run time of O($n^2$).</p>
<p>The solution to this problem is the two-sided partition, with the following invariant:</p>
<p><img src="/content/images/2016/8/partition4.png" alt="partition4"></p>
<p>With the double-sided partition, the equal element yield the best time performance: each partition just equally divide the array. The code is:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">partion2</span><span class="params">(arr, l, u)</span>:</span></div><div class="line">    t = arr[l]</div><div class="line">    i = l + <span class="number">1</span></div><div class="line">    j = u</div><div class="line">    <span class="keyword">while</span> (<span class="keyword">True</span>):</div><div class="line">        <span class="keyword">while</span>((i&lt;=u) <span class="keyword">and</span> (arr[i] &lt; t)):</div><div class="line">            i += <span class="number">1</span></div><div class="line">        <span class="keyword">while</span>(arr[j] &gt; t):</div><div class="line">            j -= <span class="number">1</span></div><div class="line">        <span class="keyword">if</span> i &gt; j:</div><div class="line">            <span class="keyword">break</span></div><div class="line">        swap(arr, i, j)</div><div class="line">    swap(arr, l, j)</div><div class="line">    <span class="keyword">return</span> j</div></pre></td></tr></table></figure>
<h3 id="Choose-right-element-when-partition"><a href="#Choose-right-element-when-partition" class="headerlink" title="Choose right element when partition"></a>Choose right element when partition</h3><p>So far, we simply choose the first element in partition. This would result in O($n^2$) run time if the array is already sorted. To avoid this situation we can choose a random partitioning element by swapping <code>x[l]</code> with a random entry in <code>x[l..u]</code>:</p>
<pre><code>swap(x[l], x[randint(l, u)])
</code></pre><p>A simpler technique is to shuffle the array before quick sort.</p>
<h3 id="Quicker-sorting-for-small-array"><a href="#Quicker-sorting-for-small-array" class="headerlink" title="Quicker sorting for small array"></a>Quicker sorting for small array</h3><p>When the array has small size, quick sort can be slower then insert sort. In this case, we can use a <code>cutoff</code> parameter to disable quick sort:</p>
<pre><code>if len(x) &lt; cutoff
  return
</code></pre><p>of course, after that we should call insert sort to sort the arry:</p>
<pre><code>qsort(0, n-1)
insert_sort()
</code></pre><h3 id="Put-it-together"><a href="#Put-it-together" class="headerlink" title="Put it together"></a>Put it together</h3><p>Combing all these elements together, the code of better quick sort is:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">cutoff = <span class="number">5</span> <span class="comment"># Just an example</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">qsort</span><span class="params">(x, l, u)</span>:</span></div><div class="line">    <span class="keyword">if</span> l &gt;= u:</div><div class="line">        <span class="keyword">return</span></div><div class="line">    <span class="comment"># Introduced above</span></div><div class="line">    m = partion2(x, l, u)</div><div class="line">    qsort(x, l, m<span class="number">-1</span>)</div><div class="line">    qsort(x, m+<span class="number">1</span>, u)</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">quick_sort</span><span class="params">(arr)</span>:</span></div><div class="line">    n = len(arr)</div><div class="line">    <span class="keyword">if</span> n &lt; cutoff:</div><div class="line">        <span class="keyword">return</span></div><div class="line">    shuffle(arr)</div><div class="line">    qsort(arr, <span class="number">0</span>, n<span class="number">-1</span>)</div><div class="line">    <span class="comment"># Implementation of insert sort is omitted here</span></div><div class="line">    insert_sort(arr)</div></pre></td></tr></table></figure>
<h2 id="Takeaway"><a href="#Takeaway" class="headerlink" title="Takeaway"></a>Takeaway</h2><ol>
<li>Quick sort is anther wonderful example of divide-and-conquer. However, to make it works we should carefully consider all possible inputs.</li>
<li>Do not bother implement your own sorting algorithm. In most case the system sorting is fast enough.  </li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/16/programmingpearls/column10/" itemprop="url">
                  Squeezing Space (column 10)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-16T08:33:51-04:00" content="2016-08-16">
              2016-08-16
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Notes-of-Programming-Pearls/" itemprop="url" rel="index">
                    <span itemprop="name">Notes of Programming Pearls</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/16/programmingpearls/column10/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/08/16/programmingpearls/column10/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>This column introduces some techniques to reduce space usage of program.</p>
<h2 id="Saving-a-sparse-matrix"><a href="#Saving-a-sparse-matrix" class="headerlink" title="Saving a sparse matrix"></a>Saving a sparse matrix</h2><p>First let us start with an example. We need to store a sparse table with 2000 integers (range from 0 to 1999) distributed in a 200*200 matrix. So half of the matrix is empty. Part of the matrix is shown as followings:</p>
<p><img src="/content/images/2016/8/sparsematrix.png" alt="anagrams"></p>
<p>We can store the matrix using array. Assuming each integer needs 4 byte, total space usage is 4<em>200</em>200 = 160 kbyte.</p>
<p>We can easily shrink the space by representing the sparse matrix with an column array and linked lists to represent elements in the given column. The data structure is shown as followings:</p>
<p><img src="/content/images/2016/8/pointerrepresent.png" alt="anagrams"></p>
<p>Note each element consist of a pointer (4 byte) and two integers (4 byte each). So 2000 elements takes 12*2000 = 24000 byte. The 200 column header pointers take 800 byte. Total space is 24.8 byte. Even though is a little slower to look up an element compared with the array representation (averagely visit 10 nodes to find a element), it is totally worth it because of the over 6X space reduction.</p>
<p>Another way to represent the sparse matrix is using three arrays: a column array with 201 elements and two parallel arrays with 2000 elements (one save row index and one save integers).</p>
<p><img src="/content/images/2016/8/arrayrepresnet.png" alt="anagrams"></p>
<p>It is easy to compute the total space usage for this version is only 8.42 kbyte (with each integer saved with 2 byte). If we want to further reduce space, we can use singe byte to save row index since it is always below 200. This reduce space to 6.4 kbyte.</p>
<p>Finally, if the index time is not important, we can simply sequentially search through the array of integers by singe-byte <em>column</em> and <em>row</em> fields. This achieves ultimate space of 4 kbyte.</p>
<h2 id="Summary-of-Techniques-for-Data-Space"><a href="#Summary-of-Techniques-for-Data-Space" class="headerlink" title="Summary of Techniques for Data Space"></a>Summary of Techniques for Data Space</h2><p><em>Recompute, Don’t Store</em>: Let us say if we need to save a huge tax table, maybe it is better to compute the tax value instead of storing it.</p>
<p><em>Sparse Data Structures</em>: We have already seen this in above example.</p>
<p><em>Data compression</em>: For example, we can encode two digits <em>a</em> and <em>b</em> using one digit <em>c</em>, where <em>c = 10*a + b</em>. Then we decode a and b by taking:</p>
<pre><code>a = c / 10
b = c % 10
</code></pre><p><em>Sharing storage</em>: We need to save two matrixes (<em>a</em> and <em>b</em>) that represent distances between points. Brian Kernighan using array-overlay to reduce two matrixes into one.</p>
<p><img src="/content/images/2016/8/arrayoverlay.png" alt="anagrams"></p>
<h2 id="Takeaway"><a href="#Takeaway" class="headerlink" title="Takeaway"></a>Takeaway</h2><ol>
<li>Before trying to optimize space, think what benefit does it brought ?</li>
<li>Data can have hot space, as we have seen in the sparse structure.</li>
<li>Some tradeoffs between space and time is necessary, but we should carefully study the alternatives before make such decision. Sometimes a better solution can yield improvement in all aspects.</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/13/beautyofprogramming/1_16/" itemprop="url">
                  24 Game
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-13T04:25:14-04:00" content="2016-08-13">
              2016-08-13
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/The-Art-of-Algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">The Art of Algorithm</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/13/beautyofprogramming/1_16/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/08/13/beautyofprogramming/1_16/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><em>Problem:</em> Design an algorithm, find solution for <a href="https://en.wikipedia.org/wiki/24_Game" target="_blank" rel="external">24 game</a>.</p>
<p> <em>Solution:</em> Abstractly, what we need to do is to use <code>+, -, *, /, (, )</code> to construct formulas with the a 4-number array <em>A=[a, b, c, d]</em>, so that the result is 24. The simplest solution is brute force. We can try all different combinations of number sequence, arithmetic operators and brackets to find the solution.</p>
<p>we can use following recursive steps to solve the problem:</p>
<ol>
<li>Choose two numbers <em>a</em>, <em>b</em>, compute <em>a+b</em>.</li>
<li>Put <em>a+b</em> back to the <em>A</em> and delete <em>a</em>,<em>b</em>, get a new array <em>A’ = [a+b, c, d]</em>.</li>
<li>Back to Step 1 with <em>A’</em></li>
</ol>
<p>Of course, in step 1 we should also compute <em>a-b, b-a, a*b, a/b (b!=0), b/a (a!=0)</em> to get the result.</p>
<p>While the idea is simple, the program itself is error-prone. I made (at least) following four mistakes when try to implement it:</p>
<ol>
<li>It is possible that the final result is not integer 24, but a floating point number that very close to 24 (because of division operation in solution).</li>
<li>We should choose every possible combination of <em>a</em> and <em>b</em> in set <em>A</em> (step 1). Naively choose first and second element does not work.</li>
<li>After we iterate over all possible operators yet still cannot find a solution, we should restore set <em>A</em> from <em>A’</em> and try other elements. In above example example, we should recover set <em>A’ = [f(a, b), c, d]</em> to <em>A = [a, b, c, d]</em>, where <em>f(a, b)</em> is an operation on <em>a</em> and <em>b</em>.</li>
<li>To easily recover <em>A</em>, we do not really need to delete element <em>a</em> and <em>b</em> in set <em>A</em>.  Instead, we can replace <em>a</em> with <em>a+b</em> and replace <em>b</em> with the last element in the input array. Then we could recursive call the solution search function on the array except the last element (<em>b</em>).</li>
</ol>
<p>The complete python code is shown as followings:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line">nums = [<span class="number">1</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</div><div class="line">results = map(str, nums)</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">solve24game</span><span class="params">(nums)</span>:</span></div><div class="line">    <span class="comment"># Recursive terminate condition: &lt;=1 element left</span></div><div class="line">    <span class="keyword">if</span> <span class="keyword">not</span> nums:</div><div class="line">        <span class="keyword">return</span></div><div class="line">    <span class="keyword">if</span> len(nums) == <span class="number">1</span>:</div><div class="line">        <span class="keyword">if</span> abs(nums[<span class="number">0</span>] - <span class="number">24</span>) &lt; <span class="number">0.0001</span>:</div><div class="line">            <span class="keyword">print</span> results[<span class="number">0</span>][<span class="number">1</span>:<span class="number">-1</span>]</div><div class="line">        <span class="keyword">return</span></div><div class="line">    n = len(nums)</div><div class="line">    <span class="comment"># Iterate over every possible combination of i and j</span></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, n):</div><div class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(i+<span class="number">1</span>, n):</div><div class="line">            a = nums[i]</div><div class="line">            b = nums[j]</div><div class="line">            res_a = results[i]</div><div class="line">            res_b = results[j]</div><div class="line">            <span class="comment"># Replace nums[i] with a+b</span></div><div class="line">            nums[i] = a+b</div><div class="line">            <span class="comment"># Replace nums[j] with last elem</span></div><div class="line">            nums[j] = nums[n<span class="number">-1</span>]</div><div class="line">            results[j] = results[n<span class="number">-1</span>]</div><div class="line">            <span class="comment"># Replace results[i] with results[i] + results[j]</span></div><div class="line">            results[i] = <span class="string">'('</span> + res_a + <span class="string">'+'</span> + res_b + <span class="string">')'</span></div><div class="line">            solve24game(nums[<span class="number">0</span>:(n<span class="number">-1</span>)])</div><div class="line">            nums[i] = a-b</div><div class="line">            results[i] = <span class="string">'('</span> + res_a + <span class="string">'-'</span> + res_b + <span class="string">')'</span></div><div class="line">            solve24game(nums[<span class="number">0</span>:(n<span class="number">-1</span>)])</div><div class="line">            nums[i] = b-a</div><div class="line">            results[i] = <span class="string">'('</span> + res_b + <span class="string">'-'</span> + res_a + <span class="string">')'</span></div><div class="line">            solve24game(nums[<span class="number">0</span>:(n<span class="number">-1</span>)])</div><div class="line">            results[i] = <span class="string">'('</span> + res_a + <span class="string">'*'</span> + res_b + <span class="string">')'</span></div><div class="line">            nums[i] = a*b</div><div class="line">            solve24game(nums[<span class="number">0</span>:(n<span class="number">-1</span>)])</div><div class="line">            <span class="keyword">if</span> a != <span class="number">0</span>:</div><div class="line">                results[i] = <span class="string">'('</span> + res_b + <span class="string">'/'</span> + res_a + <span class="string">')'</span></div><div class="line">                nums[i] = float(b)/a</div><div class="line">                solve24game(nums[<span class="number">0</span>:(n<span class="number">-1</span>)])</div><div class="line">            <span class="keyword">if</span> b != <span class="number">0</span>:</div><div class="line">                results[i] = <span class="string">'('</span> + res_a + <span class="string">'/'</span> + res_b + <span class="string">')'</span></div><div class="line">                nums[i] = float(a)/b</div><div class="line">                solve24game(nums[<span class="number">0</span>:(n<span class="number">-1</span>)])</div><div class="line">            <span class="comment"># Recover original array</span></div><div class="line">            nums[i] = a</div><div class="line">            nums[j] = b</div><div class="line">            results[i] = res_a</div><div class="line">            results[j] = res_b</div><div class="line"></div><div class="line"><span class="comment"># Test</span></div><div class="line">solve24game(nums)</div></pre></td></tr></table></figure>
<p>The key takeaway from this problem is the writing of recursive program. Think carefully about the termination condition, how to reduce problem size in each iteration and how to restore the previous stage after all iterations are over.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/09/beautyofprogramming/1_8/" itemprop="url">
                  Elevator scheduling
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-09T03:47:35-04:00" content="2016-08-09">
              2016-08-09
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/The-Art-of-Algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">The Art of Algorithm</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/09/beautyofprogramming/1_8/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/08/09/beautyofprogramming/1_8/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><em>Problem:</em> Assuming a building has <em>N</em> levels. The elevator will only stop at one level (to save time), and people have to climb to the level they choose. Designing an elevator scheduling algorithm, so that the total levels people have to climb are minimized.</p>
<p><em>Solution 1:</em> Assuming elevator stops at level <em>K</em>, and the number of people to level <em>i</em> is $n_i$. So the total levels people have climb is $L_t = \sum_{i=1}^{N} n_i*|K-i|$.</p>
<p>The obvious solution is to compute $L_t$ for <em>K=1 to N</em>, and then choose the target <em>K</em> that leads to the minimum $L_t$. The code is also straightforward:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">targetK = <span class="number">0</span>;</div><div class="line">lt = <span class="number">0</span>, lmin = <span class="number">0</span>;</div><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span> k=<span class="number">0</span>; k &lt; N; k++)</div><div class="line">&#123;</div><div class="line">  lt = <span class="number">0</span>;</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i &lt; N; i++)</div><div class="line">    <span class="comment">// n[] saves number of people that choose each level</span></div><div class="line">    lt += <span class="built_in">abs</span>(k-i)*n[i];</div><div class="line">  <span class="keyword">if</span> ((lt &lt; lmin) || (lmin == <span class="number">0</span>))</div><div class="line">  &#123;</div><div class="line">    lmin = lt;</div><div class="line">    targetK = k;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">return</span> targetK;</div></pre></td></tr></table></figure>
<p>The time complexity of this algorithm is O($N^2$).</p>
<p><em>Solution 2:</em> Assuming total levels people have to climb is $L_i$ if elevator stops at level <em>i</em>. Then what is $L_{i+1}$ ?</p>
<p>Let $n_p$ denote total number of people that choose level <em>i</em> and below, and $n_q$ denote the rest, then we have $L_{i+1} = L_i + n_p - n_q$. It is easy to see that $L_{i+1} &lt; L_i$ if $n_p &lt; n_q$. Note $n_q = N-n_p$, the condition can be further simplified to $n_p &lt; N/2$. This implies that $L_i$ keeps decreasing as long as $n_p &lt; N/2$ and reaches minimum before $n_p &gt;= N/2$. This lead us to the following simple algorithm:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">np = <span class="number">0</span>;</div><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;N; i++)</div><div class="line">&#123;</div><div class="line">  np += n[i];</div><div class="line">  <span class="keyword">if</span> (np &gt;= N/<span class="number">2</span>)</div><div class="line">    <span class="keyword">break</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">return</span> i;</div></pre></td></tr></table></figure>
<p>This algorithm effectively reduce the time complexity to O(<em>N</em>). Besides it remove the need of computing $L_t$ and is more simple to implement. The takeaway is that by deep understand the problem and save the intermediate variable ($L_i$ in this example), the computation complexity can be greatly reduced.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/05/programmingpearls/column8/" itemprop="url">
                  Algorithm design techniques (column 8)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-05T07:40:03-04:00" content="2016-08-05">
              2016-08-05
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Notes-of-Programming-Pearls/" itemprop="url" rel="index">
                    <span itemprop="name">Notes of Programming Pearls</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/05/programmingpearls/column8/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/08/05/programmingpearls/column8/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>This column introduces four solutions to solve a small problem. The slowest algorithm takes 15 days when problem size $n = 100000$, the last optimized algorithm only takes 5 milliseconds. The emphasize was the basic ideas and techniques to design algorithms.</p>
<h2 id="Problem-and-Solutions"><a href="#Problem-and-Solutions" class="headerlink" title="Problem and Solutions"></a>Problem and Solutions</h2><p><em>Problem definition:</em> Given a vector <em>x</em> of <em>n</em> floating-point numbers; return the maximum sum found in any contiguous sub-vector of that input.</p>
<h3 id="Solution-1-Brute-force"><a href="#Solution-1-Brute-force" class="headerlink" title="Solution 1: Brute force"></a>Solution 1: Brute force</h3><p>The simplest idea is to iterate over all possible sub-vector, and return the one with maximum sum.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">maxsofar = <span class="number">0</span></div><div class="line"><span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;n; i++)</div><div class="line">  <span class="keyword">for</span> (j=i; j&lt;n; j++)</div><div class="line">  &#123;</div><div class="line">     sum = <span class="number">0</span></div><div class="line">     <span class="keyword">for</span> (k = i; k&lt;j; k++)</div><div class="line">     &#123;</div><div class="line">       <span class="comment">// sum is the sum of x[i..j]</span></div><div class="line">       sum += x[i]</div><div class="line">       maxsofar = max(maxsofar, sum)</div><div class="line">     &#125;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>Time complexity is O($n^3$). In other words, it sucks.</p>
<h3 id="Solution-2-Optimized-brute-force"><a href="#Solution-2-Optimized-brute-force" class="headerlink" title="Solution 2: Optimized brute force"></a>Solution 2: Optimized brute force</h3><p>A clear way to optimize it is as followings:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">maxsofar = <span class="number">0</span></div><div class="line"><span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;n; i++)</div><div class="line">&#123;</div><div class="line">  sum = <span class="number">0</span></div><div class="line">  <span class="keyword">for</span> (j=i; j&lt;n; j++)</div><div class="line">  &#123;</div><div class="line">    <span class="comment">// sum is the sum of x[i..j]</span></div><div class="line">    sum += x[j]</div><div class="line">    maxsofar = max(maxsofar, sum)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>The time complexity of this algorithm is O($n^2$). Not so good, but better than Solution 1.</p>
<p>Another quadratic algorithm use the fact that sum of <em>x[i..j]</em> is equal with <em>x[0..j]</em> - <em>x[0..i]</em>. We can process the vector first to get the cumulative sum until $i^{th}$ element and then use above equation to get <em>x[i..j]</em>.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">maxsofar = <span class="number">0</span></div><div class="line">cumarr[<span class="number">0</span>] = x[<span class="number">0</span>]</div><div class="line"><span class="keyword">for</span> (i=<span class="number">1</span>; i&lt;n; i++)</div><div class="line">  cumarr[i] = cumarr[i<span class="number">-1</span>] + x[i]</div><div class="line"><span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;n; i++)</div><div class="line">  <span class="keyword">for</span> (j=i; j&lt;n; j++)</div><div class="line">  &#123;</div><div class="line">    <span class="comment">// sum is the sum of x[i..j]</span></div><div class="line">    sum = cumarr[j] - cumarr[i]</div><div class="line">    maxsofar = max(maxsofar, sum)</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>This algorithm also takes O($n^2$). Meanwhile, its space complexity is O(n). So it actually is even worse then the above one.</p>
<h3 id="Solution-3-Divide-and-conquer"><a href="#Solution-3-Divide-and-conquer" class="headerlink" title="Solution 3: Divide and conquer"></a>Solution 3: Divide and conquer</h3><p>The idea of divide-and-conquer can be generalized as followings:</p>
<p><em>To solve a problem of size n, recursively solve two subproblems of size n/2, and combine solutions to yield a solution to the complete problem</em>.</p>
<p>So how to use this idea to solve solve our problem ?</p>
<p>We can divide the original vector into sub-vector $a$ and $b$. The maximum contiguous sub-vector must be entirely either in a ($m_a$) or b ($m_b$), or <em>across</em> a and b ($m_c$).</p>
<p>A key question is how to calculate $m_c$. Note $m_c$ can only extend from the split boundary. So $m_c$ is the sum of max sub-vector on left side and that on right side.  </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">float</span> <span class="title">maxsum</span><span class="params">(l, u)</span></span></div><div class="line">&#123;</div><div class="line">  <span class="comment">// Return condition: 0 or 1 element</span></div><div class="line">  <span class="keyword">if</span> (l &gt; u)</div><div class="line">    <span class="keyword">return</span>;</div><div class="line">  <span class="keyword">if</span> (l == u)</div><div class="line">    <span class="keyword">return</span> max(<span class="number">0</span>, x[l])</div><div class="line">  m = (l + u)/<span class="number">2</span></div><div class="line">  lsum = lmax = rsum = rmax = <span class="number">0</span></div><div class="line">  <span class="keyword">for</span> (i=m; i&gt;l; i--)</div><div class="line">  &#123;</div><div class="line">    lsum += x[i]</div><div class="line">    lmax = max(lmax, lsum)</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">for</span> (i=m+<span class="number">1</span>; i&lt;u; i++)</div><div class="line">  &#123;</div><div class="line">    rsum += x[i]</div><div class="line">    rmax = max(rmax, rsum)</div><div class="line">  &#125;</div><div class="line">  ma = maxsum(l, m)</div><div class="line">  mb = maxsum(m+<span class="number">1</span>, u)</div><div class="line">  mc = lmax + rmax</div><div class="line">  <span class="keyword">return</span> max(ma, mb, mc)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>This reduces the time-complexity to O($nlog(n)$).</p>
<h3 id="Solution-4-Scanning"><a href="#Solution-4-Scanning" class="headerlink" title="Solution 4: Scanning"></a>Solution 4: Scanning</h3><p>Over quite a long period of time, people think solution 3 is the optimal, until Jay Kadane sketch the following scanning algorithm that can solve the problem in in O($n$).</p>
<p>The principle of scanning algorithm can be generalized as followings:</p>
<p><em>Suppose you have solved the problem for x[0..i-1]; extend that solution to include x[i]</em></p>
<p>So the idea to solve the problem is: the max contiguous sub-vector is either in x[0..i-1] (store in <em>maxsofar</em>), or ends at position <em>i</em> (store in <em>maxending</em>). This results in following algorithm:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">maxsofar = <span class="number">0</span></div><div class="line">maxending = <span class="number">0</span></div><div class="line"><span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;n; i++)</div><div class="line">&#123;</div><div class="line">  maxending = max（maxending + x[i]， maxending)</div><div class="line">  maxsofar = max(maxsofar, maxending)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>What an elegant algorithm ! It is surprising that Jay Kadane came up with the idea in less than one minute. This sharp insight can only come from years of hard training in algorithm thinking.</p>
<h2 id="Takeaway"><a href="#Takeaway" class="headerlink" title="Takeaway"></a>Takeaway</h2><ol>
<li>Save states to avoid re-computation. We can see the importance of doing so again and again in algorithm design (e.g, the elevator scheduling algorithm).</li>
<li>Preprocess information about data structure. What if we can store data in binary tree or a heap ? Is that gonna shorten the searching time?</li>
<li>Divide-and-conquer: a powerful tool to reduce the size of problem.</li>
<li>Scanning algorithm：seems particularly useful if input data structure is array.</li>
<li>Lower-bound: what is the lower bound of the complexity? How to reach that lower bound ?</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/03/beautyofprogramming/1_5/" itemprop="url">
                  Find missing elements
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-03T23:32:46-04:00" content="2016-08-03">
              2016-08-03
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/The-Art-of-Algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">The Art of Algorithm</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/03/beautyofprogramming/1_5/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/08/03/beautyofprogramming/1_5/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><em>Problem: Given an array where every element appear twice except one. Find that only element which appears only once.</em></p>
<p><strong>Solution:</strong> The simplest idea is to iterator over the array and record how many times an element appear. Time and space-complexity are both O(N).</p>
<p>Clearly, it is possible to  reduce space-complexity.</p>
<p><strong>Idea1:</strong> if one element has already appeared twice, we can delete that element. In this case worst case space-complexity is still O(N), but best case is O(1).</p>
<p><strong>Idea2:</strong> If we want to strictly reduce the space-complexity to O(1), then we need a parameter that can save the status of all seen element.</p>
<p>If all elements have appeared twice, then <em>xor</em> operation over all elements in the array should return zero. Otherwise it should return the missing element. This solution is optimal in both time and space.</p>
<p><em>Further thinking: what if there are two elements missing ? What bout </em>N<em> elements missing?</em></p>
<p>Assuming if <em>x</em> and <em>y</em> are missing. Then <em>xor</em> over all elements in the array will return x <em>xor</em> y. Unfortunately we still do not know x and y. So there is no particularly good way to solve this problem.</p>
<p>However, if the array <em>pre-defined</em> (the original complete array is known), then it is possible to find the missing elements in O(N) time and O(1) space. We can simply add all the elements in the original array, and see the difference with the sum of incomplete array. Assuming the difference is <em>a</em>, then we have:</p>
<pre><code>x + y = a
</code></pre><p>We can easily construct another equation with x and y, like the difference square sum. With these two equations we can derive x and y directly.</p>
<p>Likewise, if there are N elements missing we only have to construct N equations (maybe hard to though).</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/03/programmingpearls/column7/" itemprop="url">
                  The Back of the envelop (column 7)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-03T09:23:47-04:00" content="2016-08-03">
              2016-08-03
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Notes-of-Programming-Pearls/" itemprop="url" rel="index">
                    <span itemprop="name">Notes of Programming Pearls</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/03/programmingpearls/column7/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/08/03/programmingpearls/column7/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>“Back of the envelop” is a powerful tool to quickly estimate the value of parameter. This column introduce basic principles to perform this kind of estimation.</p>
<h2 id="Basic-skills"><a href="#Basic-skills" class="headerlink" title="Basic skills"></a>Basic skills</h2><p>Let us start with an example: how to estimate the flows out of Mississippi River every year ?</p>
<p>We can consider this problem as following: the river was about 1 mile wide, 20 feet deep, and the rate of flow was 5 miles an hour (or a 120 miles a day), that gives:</p>
<pre><code>1 mile * 1/250 mile * 120 miles/day = 1/2 mile^3/day
</code></pre><p>Here comes the basic idea of “back of envelop” calculation: ignoring the complex variable, focusing on the key parameters, come up with a simple mathematical equation and calculate the value according to some common knowledge (1 mile wide is a reasonable guess, 20 meters clearly is not).</p>
<p>Here are some basic rules we can adopt in estimation.</p>
<h3 id="Dimension-check"><a href="#Dimension-check" class="headerlink" title="Dimension check"></a>Dimension check</h3><p>If not sure whether the estimation is accurate or not, we should first check the dimension. In above example, multiplying</p>
<pre><code>mile * mile * mile/day = mile^3/day
</code></pre><p>So the result has the right form.</p>
<h3 id="Rule-of-72"><a href="#Rule-of-72" class="headerlink" title="Rule of 72"></a>Rule of 72</h3><p>Assuming a variable is increasing by <em>r</em> percent per year, after <em>y</em> years how many does the variable increases ? The rule of 72 tells us that if <code>r*y=72</code>, then the variable will roughly double. For example, say you save $1000 in the back. The interest was 6% per year, then after 12 years gives $2012.</p>
<p>Another example: a problem takes 10 seconds to solve a problem of size $n=40$, increase $n$ by one increase the run time by 12 percent. How long does the program take when $n=160$ ?</p>
<p>Rule of 72 tell us run time doubles when n increase 6. So it double 20 times after n increase to 160. Double 20 times is about $10^6$ increase ($2^{20} \approx 10^6$). So the problem takes $10^7$ seconds to solve when $n=160$.</p>
<p>How long exactly is $10^7$ seconds ? To estimate that we introduce another handy rule:</p>
<pre><code>Pi seconds is a nanocentury.
</code></pre><p>So $\pi$ second is about $10^{-9}$ seconds. $10^7$ seconds is like 1 year/$\pi$ which is almost 4 month.</p>
<h3 id="Little’s-Law"><a href="#Little’s-Law" class="headerlink" title="Little’s Law"></a>Little’s Law</h3><p>Little law says that the average number of things in the system is the product of the average rate at which things leave the system and the average time each one spends in the system.</p>
<p>While looks complex, this rule is actually surprisingly simple in use. For example you are waiting in line outside of a club, how long do you have to wait to get in that club ? You can estimate that the club holds 60 people, averagely everyone spend 3 hour in it, so approximately 20 people leave that club per hour. Assuming 20 people are in front of you, then you can estimate you have to wait one hour to get in.</p>
<h2 id="Takeaway"><a href="#Takeaway" class="headerlink" title="Takeaway"></a>Takeaway</h2><p>As Einstein says:</p>
<pre><code>Everything should be made as simple as possible, but not simpler.
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/content/images/avatar.jpg"
               alt="Fan Zhou" />
          <p class="site-author-name" itemprop="name">Fan Zhou</p>
          <p class="site-description motion-element" itemprop="description">Ph.D @ Northeastern</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/">
              <span class="site-state-item-count">18</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Fan Zhou</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  

    <script type="text/javascript">
      var disqus_shortname = 'fanzhoubeyond';
      var disqus_identifier = 'index.html';
      var disqus_title = "";
      var disqus_url = '';

      function run_disqus_script(disqus_script){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');
      
    </script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="custom_mathjax_source">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
  




  
  

  

  

  

</body>
</html>
