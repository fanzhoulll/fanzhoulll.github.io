<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Blog, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="A lifelong learner">
<meta property="og:type" content="website">
<meta property="og:title" content="Fan Zhou">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Fan Zhou">
<meta property="og:description" content="A lifelong learner">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Fan Zhou">
<meta name="twitter:description" content="A lifelong learner">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/page/2/"/>

  <title> Fan Zhou </title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  










  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Fan Zhou</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/02/pythontips/forloop/" itemprop="url">
                  For loop in python
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-02T12:23:35+08:00" content="2016-08-02">
              2016-08-02
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Programming-tricks/" itemprop="url" rel="index">
                    <span itemprop="name">Programming tricks</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/02/pythontips/forloop/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/08/02/pythontips/forloop/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Today I try to implement heap sort, and has to iterate over an array like following:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// n is array size</span></div><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = n; i &gt; <span class="number">0</span>; i=i/<span class="number">2</span>)</div><div class="line">  <span class="comment">// do stuff</span></div></pre></td></tr></table></figure>
<p>This looks quite concise and elegant. However, I found that in Python we can only use <code>while</code> loop to do the same thing:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">i = n</div><div class="line"><span class="keyword">while</span> (i &gt; <span class="number">0</span>):</div><div class="line">  <span class="comment"># do stuff</span></div><div class="line">  i = i/<span class="number">2</span></div></pre></td></tr></table></figure>
<p>This involves two additional lines. After consulting people on a tech forum, I realized that the reason that python does not support <code>for</code> loop as in other language was that python regard <code>for</code> as a way to iterate over every element in a list. So if really need the one line <code>for loop</code>, we could define a iterator as followings：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">cut_in_half_until_zero</span><span class="params">(n)</span>:</span></div><div class="line">    <span class="keyword">while</span> n &gt; <span class="number">0</span>:</div><div class="line">        <span class="keyword">yield</span> n  <span class="comment"># Iterator</span></div><div class="line">        n = n // <span class="number">2</span></div><div class="line"> </div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> cut_in_half_until_zero(<span class="number">100</span>):</div><div class="line">    print(i)  <span class="comment"># 100, 50, 25, 12, 6, 3, 1</span></div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/01/programmingpearls/column5/" itemprop="url">
                  A small matter of programming (column 5)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-01T18:26:59+08:00" content="2016-08-01">
              2016-08-01
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Notes-of-Programming-Pearls/" itemprop="url" rel="index">
                    <span itemprop="name">Notes of Programming Pearls</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/01/programmingpearls/column5/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/08/01/programmingpearls/column5/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>We have discussed how to define the right problem, choose algorithm and data structure. Also, we have used program verification to write elegant pseudocode. The last thing to do, is just a small matter of programming.</p>
<p>This column introduce several important techniques of producing correct code for binary search. Here we focus on two of them: <strong>assertion</strong> and <strong>automatic testing</strong>.</p>
<h2 id="The-art-of-assertion"><a href="#The-art-of-assertion" class="headerlink" title="The art of assertion"></a>The art of assertion</h2><p>We can use <code>assert</code> to state that we believe a logical expression is true. The statement of <code>assert(n&gt;=0)</code> will raise an error if <em>n</em> is negative, otherwise it do nothing. In binary search, we want to make sure that the (1) the input array is sorted; (2) every iteration the range of array decreases. So we can insert following <code>assert</code> statement:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">bsearch</span><span class="params">(arr, t, lo, hi)</span>:</span></div><div class="line">    <span class="string">'''</span></div><div class="line">    Binary search, return position of value t if found, otherwise return -1</div><div class="line">    '''</div><div class="line">    oldsize = size</div><div class="line">    size = hi - lo + <span class="number">1</span></div><div class="line"></div><div class="line">    <span class="keyword">assert</span>(size &lt; oldsize) <span class="comment"># Making sure range decreases every iteration</span></div><div class="line">    <span class="keyword">assert</span>(sorted(arr))  <span class="comment"># Making sure arr is sorted</span></div><div class="line">    <span class="keyword">if</span> hi &lt; lo:</div><div class="line">        <span class="keyword">return</span> <span class="number">-1</span></div><div class="line"></div><div class="line">    mid = (lo + hi)/<span class="number">2</span></div><div class="line">    <span class="keyword">if</span> (arr[mid] &gt; t):</div><div class="line">        bsearch(arr, t, lo, mid<span class="number">-1</span>)</div><div class="line">    <span class="keyword">elif</span> (arr[mid] &lt; t):</div><div class="line">        bsearch(arr, t, mid+<span class="number">1</span>, hi)</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        <span class="keyword">return</span> mid</div></pre></td></tr></table></figure>
<h2 id="Automated-testing"><a href="#Automated-testing" class="headerlink" title="Automated testing"></a>Automated testing</h2><p>An ideal testing for binary search should cover empty array, common sizes (0,1,2), several powers of 2 and etc. Automated testing can save us from the dreadful boring manual testing.</p>
<p>First we use following script to examine the case where all elements are distinct.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">autotest1</span><span class="params">()</span>:</span></div><div class="line">    <span class="string">'''</span></div><div class="line">    Test distinct elements (plus one at end)</div><div class="line">    '''</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, n+<span class="number">1</span>):</div><div class="line">        arr[i] = <span class="number">10</span>*i</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, n):</div><div class="line">        <span class="comment"># The input is different from above function</span></div><div class="line">        <span class="keyword">assert</span>(bsearch(<span class="number">10</span>*i)     == i)</div><div class="line">        <span class="keyword">assert</span>(bsearch(<span class="number">10</span>*i - <span class="number">5</span>) == <span class="number">-1</span>)</div><div class="line">    <span class="keyword">assert</span>(bsearch(<span class="number">10</span>*n<span class="number">-5</span>) == <span class="number">-1</span>)</div><div class="line">    <span class="keyword">assert</span>(bsearch(<span class="number">10</span>*n)   == <span class="number">-1</span>)</div></pre></td></tr></table></figure>
<p>Next we examine an array of equal elements:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">autotest2</span><span class="params">()</span>:</span></div><div class="line">    <span class="string">'''</span></div><div class="line">    Test equal elements</div><div class="line">    '''</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, n):</div><div class="line">        arr[i] = <span class="number">10</span></div><div class="line">    <span class="keyword">if</span> n == <span class="number">0</span>:</div><div class="line">        <span class="keyword">assert</span>(bsearch(<span class="number">10</span>) == <span class="number">-1</span>)</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        <span class="keyword">assert</span>(<span class="number">0</span> &lt;= bsearch(<span class="number">10</span>) &lt; n)</div><div class="line">    <span class="keyword">assert</span>(<span class="number">5</span>) == <span class="number">-1</span></div></pre></td></tr></table></figure>
<h2 id="Takeaway"><a href="#Takeaway" class="headerlink" title="Takeaway"></a>Takeaway</h2><ol>
<li>Sketch a hard function in a convenient high-level pseudocode, then translate it into implementation language.</li>
<li>Assert played a key role in making sure the run-time behavior of code matches our understanding.</li>
<li>Testing of function can be done much easily alone than in a large system.</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/31/programmingpearls/column4/" itemprop="url">
                  Writing correct program (column 4)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-07-31T08:09:00+08:00" content="2016-07-31">
              2016-07-31
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Notes-of-Programming-Pearls/" itemprop="url" rel="index">
                    <span itemprop="name">Notes of Programming Pearls</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/31/programmingpearls/column4/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/07/31/programmingpearls/column4/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>This column introduce techniques to verify program correctness using an example of binary search problem.</p>
<h2 id="Binary-search"><a href="#Binary-search" class="headerlink" title="Binary search"></a>Binary search</h2><p><em>Problem definition:</em> Determine whether a sorted array <em>x[0..n-1]</em> contains element <em>t</em>.</p>
<p><em>Solution:</em> This is a classical problem that can be solved using binary search. The idea is to check the middle element of array <em>x[mid]</em>. If <em>t&lt;x[mid]</em> then <em>t</em> must be on the left side of <em>x[mid]</em>, otherwise right side. So we can recursively search for <em>t</em> in smaller range, until we finally find <em>t</em> (or return -1 if it does not exist).</p>
<p><em>Code:</em><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">bsearch</span><span class="params">(arr, t, lo, hi)</span>:</span></div><div class="line">    <span class="string">'''</span></div><div class="line">    Binary search, return position of value t if found, otherwise return -1</div><div class="line">    '''</div><div class="line">    <span class="keyword">if</span> hi &lt; lo:</div><div class="line">        <span class="keyword">return</span> <span class="number">-1</span></div><div class="line"></div><div class="line">    mid = (lo + hi)/<span class="number">2</span></div><div class="line">    <span class="keyword">if</span> (arr[mid] &gt; t):</div><div class="line">        bsearch(arr, t, lo, mid<span class="number">-1</span>)</div><div class="line">    <span class="keyword">elif</span> (arr[mid] &lt; t):</div><div class="line">        bsearch(arr, t, mid+<span class="number">1</span>, hi)</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        <span class="keyword">return</span> mid</div></pre></td></tr></table></figure></p>
<h2 id="Program-Verification"><a href="#Program-Verification" class="headerlink" title="Program Verification"></a>Program Verification</h2><p>Now we walk through it by verify each step in the code behaves exactly as we thought.</p>
<p>We search for $t$ by shrinking a range <code>[lo, hi]</code> that contains <em>t</em>. Initially <code>lo = 0</code>, <code>hi = n-1</code>, so <em>t</em> must lies between <code>[lo, hi]</code> if it exists.</p>
<p>Next we come into the loop. If <em>lo &gt; hi</em>, then there is no element between <code>[lo, hi]</code>. Thus <em>t</em> does not present in the array and we can return -1. Otherwise we check middle element <code>x[mid]</code>. If <code>t &lt; x[mid]</code>, then <em>t</em> must lies between <code>[lo, mid-1]</code>. If <code>t &gt; x[mid]</code>, then we can search in the range <code>[mid+1, hi]</code>. If <code>t = x[mid]</code>, then we have found  <em>t</em> and can return the position.</p>
<p>After one iteration is finished, there are only three results: (1) <em>t</em> does not exist, return -1; (2) found <em>t</em>, return position; (3) <em>t</em> not found, search in the new range (with smaller size) where <em>t</em> should in.</p>
<p>From above analysis we see that: (1) in each loop iteration is established；(2) each iteration preserve the truth (<em>t</em> must falls in the range between <code>[lo, hi]</code>); (3) the desired results is true (-1 if not exist, otherwise return position). Therefore we are confident that above code can output right answer.</p>
<h2 id="Takeaway"><a href="#Takeaway" class="headerlink" title="Takeaway"></a>Takeaway</h2><ol>
<li>Verify correctness of loop: <em>Initialization</em> (loop invariant is well established), <em>Preservation</em> (truth is preserved during iteration) and <em>Termination</em> (desired result is obtained when terminates)</li>
<li>Verify correctness of function: <em>precondition</em>: state mush be true before function called. <em>postcondition:</em> what function guarantee on termination.</li>
<li>Resist the stupid idea to “just change it until it works”, make sure to understand the code at all time.</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/30/programmingpearls/column3/" itemprop="url">
                  Data structure programs (column 3)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-07-30T07:46:47+08:00" content="2016-07-30">
              2016-07-30
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Notes-of-Programming-Pearls/" itemprop="url" rel="index">
                    <span itemprop="name">Notes of Programming Pearls</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/30/programmingpearls/column3/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/07/30/programmingpearls/column3/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>This column introduce the importance of choosing right data structure: it can make program much shorter and easier to maintain.</p>
<h2 id="Several-examples"><a href="#Several-examples" class="headerlink" title="Several examples"></a>Several examples</h2><h3 id="Represent-survey"><a href="#Represent-survey" class="headerlink" title="Represent survey"></a>Represent survey</h3><p>Consider how to code following questionnaire filled by students of a specific college.</p>
<p><img src="/content/images/2016/7/questionnaire.png" alt="questionnaire"></p>
<p>Actual questionnaire is much more complicated. The recommended way to store number is using array. For example, the array could be laid out according to output structure along the three dimensions of <em>campus</em>, <em>ethnic group</em> and all the <em>columns</em> in questionnaire.</p>
<h3 id="Form-Letter-Programming"><a href="#Form-Letter-Programming" class="headerlink" title="Form-Letter Programming"></a>Form-Letter Programming</h3><p>Think how to print following information:</p>
<p><img src="/content/images/2016/7/info.png" alt="info"></p>
<p>A simple but tedious way was to use a sequence of print, while a better approach involves writing a form letter generator relies on a form letter schema like:</p>
<p><img src="/content/images/2016/7/lettergenerator.png" alt="lettergenerator"></p>
<p>Then we could print the scheme as it is if the letter is not <code>$</code>, otherwise we retrieve the corresponding field in the database as specified by the number following <code>$</code> and print it.</p>
<h3 id="Others"><a href="#Others" class="headerlink" title="Others"></a>Others</h3><p><em>Error message:</em> Instead of scatter hundreds of error messages throughout the code, it is better to access them using a single function.</p>
<p><em>Word analysis:</em> Consider the application of removing the endings (‘-ing’, ‘-s’, ‘-ed’,etc). Using table to save the common ending can shorten the code length greatly.</p>
<h2 id="Takeaways"><a href="#Takeaways" class="headerlink" title="Takeaways"></a>Takeaways</h2><ol>
<li>A long stretch of similar code is often best expressed by array.</li>
<li>Let the data structure the program: before writing code, good programmers thoroughly understand the input, the output and intermediate data structures around which programs are built.</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/28/programmingpearls/column2/" itemprop="url">
                  AHA! Algorithms (column 2)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-07-28T08:21:09+08:00" content="2016-07-28">
              2016-07-28
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Notes-of-Programming-Pearls/" itemprop="url" rel="index">
                    <span itemprop="name">Notes of Programming Pearls</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/28/programmingpearls/column2/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/07/28/programmingpearls/column2/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>Column 2 introduce three problems: <em>(missing) item search</em>, <em>vector rotation</em> and <em>anagrams finding</em> and the techniques to solve them. It discusses the effectiveness of sorting/binary searching, finding signature for the items and more importantly, finding the right primitives to solve the problem.</p>
<h2 id="Problem-1-Item-searching"><a href="#Problem-1-Item-searching" class="headerlink" title="Problem 1: Item searching"></a>Problem 1: Item searching</h2><p><em>Description:</em> Given a sequential file that contains $N$ 32-bit integers in random order, find an integer that are not in the file.</p>
<p>Note the 32-bit define the max range of the data ($2^{32}$). With enough memory we can use the bitmap introduced in the first column to find the missing integer. However, we can’t do it if the memory constrain was only few hundreds byte. In this case, the efficient solution is first sort the integers, then using binary search to looking for the missing item (see column 4 for the implementation of binary search).</p>
<h2 id="Problem-2-Vector-rotation"><a href="#Problem-2-Vector-rotation" class="headerlink" title="Problem 2: Vector rotation"></a>Problem 2: Vector rotation</h2><p><em>Description:</em> Rotate a one-dimensional vector x of n elements b i positions. For instance, the vector abcdefg is rotated to defghabc.</p>
<ul>
<li><p><strong>Idea 1</strong>: The simplest way is to copy the first $i$ elements to a temporal array. Then move remaining $n-i$ elements left $i$ positions. Finally copy the $i$ elements back at the end of the $n-i$ elements. <strong>Problem:</strong> space-expensive as it requires $i$ extra location</p>
</li>
<li><p><strong>Idea 2</strong>: We can also move x[0] to a temp position, then move x[i] to x[0], x[2i] to x[i], etc. Then we repeat the process again with x[1] until all elements are moved. <strong>Problem:</strong> still time consuming since we have to move all n elements.</p>
</li>
<li><p><strong>Aha moment</strong>: Denote first $i$ elements as $a$, the remaining elements as $b$, then the vector $x$ could be rewrote as $ab$. Rotating $x$ left by $i$ position is like swap $ab$ to $ba$. We can do it with following three steps (comment gives an example with n = 7, i = 4).</p>
<pre><code>reverse(0, i-1) // dcbaefg
reverse(i, n)   // dcbagfe
reverse(0, n)   // efgabcd
</code></pre><p>where <code>reverse(i, j)</code> simply reverse the x[i, j]. The idea is to first get $a^r$, then $b^r$, so $ba$ can be obatained with $(a^rb^r)^r$</p>
</li>
</ul>
<h2 id="Problem-3-Anagrams-searching"><a href="#Problem-3-Anagrams-searching" class="headerlink" title="Problem 3: Anagrams searching"></a>Problem 3: Anagrams searching</h2><p><em>Description:</em> Given a dictionary of English words, find all sets of anagrams. For instance, “pots”, “stops” and “tops” are all anagrams.</p>
<p>The first step is to find signature of each word by sorting alphabets in the word so that all anagrams have the same signature (in above example, the signature is “aopst”). Then we could sort all words. After that all words with the same signature will be “squashed” together. Following figure illustrate how the algorithm works.</p>
<p><img src="/content/images/2016/7/anagrams_pp_c2.png" alt="anagrams"></p>
<h2 id="Takeway"><a href="#Takeway" class="headerlink" title="Takeway"></a>Takeway</h2><ol>
<li><p>Column 1 precisely defining the problem from understanding what the user really want to do and the constrain. This column deal with the following step: find the right primitives to solve the problem.</p>
</li>
<li><p>Do not rush coding with your first thought, sit back and wait for an insight first.</p>
</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/27/programmingpearls/column1/" itemprop="url">
                  Cracking the Oyster (column 1)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-07-27T07:33:13+08:00" content="2016-07-27">
              2016-07-27
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Notes-of-Programming-Pearls/" itemprop="url" rel="index">
                    <span itemprop="name">Notes of Programming Pearls</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/27/programmingpearls/column1/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/07/27/programmingpearls/column1/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>We need to solve a sorting problem. First let us see how to extract the key information from the conservation and define problem. Then we introduce <em>bitmap</em>, a data structure can solve the problem nicely.</p>
<h2 id="Start-from-a-conversation"><a href="#Start-from-a-conversation" class="headerlink" title="Start from a conversation"></a>Start from a conversation</h2><blockquote>
<p>A: What do you need to sort ?</p>
<p>B: A file contains at most ten million records;each record is a seven-digit integer.</p>
<p>A: Is there any memory constrain ?</p>
<p>B: One megabyte</p>
<p>A: Is there anything else you can tell me about the records (format/type of the data)?</p>
<p>B: Each one is a seven-digit positive integer with no other associated data, and no integer can appear more than once.</p>
</blockquote>
<h2 id="Precise-problem-definition"><a href="#Precise-problem-definition" class="headerlink" title="Precise problem definition"></a>Precise problem definition</h2><p><em>Input:</em> A file containing at most <em>n</em> positive integers, each less than <em>n</em>, where $n=10^7$  . No integers appears two times in the input.</p>
<p><em>Output:</em> A sorted list in increasing order of the input integers.</p>
<p><em>Constrains:</em> At most (roughly) a megabyte of storage is available in main memory; ample disk storage is available. The run time can be at most several minutes; a run time of ten seconds need not be decreased.</p>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>The key challenge is the memory constrain. If each number is represent as 32-bit number, then 1 Megabyte can at most store 250000 numbers. So we can’t store all the numbers in the memory and sort is using system sorting.</p>
<p>This problem can be solved using <em>bitmap</em>. A bitmap is a stream of bits used to store a set of numbers. For example, the set {1,2,3,5} can be represented in bitmap as {0, 1, 1, 1, 0, 1}. The bits representing numbers in the set are 1, and all other bits are 0.</p>
<p>With bitmap we can store the 1 million number array with only $10^7$ bits, which is about 1250000 = 1.25 Mbyte. Then we could sort the array with following steps:</p>
<ol>
<li><p>Initial the bitmap by setting all bits to 0</p>
</li>
<li><p>Reading each integer in the array, set corresponding bit to 1 in the bitmap</p>
</li>
<li><p>Produces the sorted output list by inspecting each bit and writing out the appropriate integer if the bit is one.</p>
</li>
</ol>
<p>This solution requires 1.25Mbyte memory. If the 1Mbyte constrain is rigorous, then we could run two pass over all the input, each time handle only half of the data.</p>
<h2 id="Takeaway"><a href="#Takeaway" class="headerlink" title="Takeaway"></a>Takeaway</h2><ol>
<li><p>Defining the right problem. Pay attention to the memory/time constrain. See if there is any special structure of the input that we can use to reduce the complexity of the algorithm.</p>
</li>
<li><p>Bitmap structure is perfect for storing the array with finite range. It is better if there is no repetitive number in the array, but this is not a necessary condition.</p>
</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/24/hello-world/" itemprop="url">
                  Hello World
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-07-24T21:26:38+08:00" content="2016-07-24">
              2016-07-24
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/24/hello-world/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/07/24/hello-world/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/content/images/avatar.jpg"
               alt="Fan Zhou" />
          <p class="site-author-name" itemprop="name">Fan Zhou</p>
          <p class="site-description motion-element" itemprop="description">A lifelong learner</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">17</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Fan Zhou</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  

    <script type="text/javascript">
      var disqus_shortname = 'fanzhoulll';
      var disqus_identifier = 'page/2/index.html';
      var disqus_title = "";
      var disqus_url = '';

      function run_disqus_script(disqus_script){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');
      
    </script>
  




  
  

  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>
  <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="custom_mathjax_source">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->


  

  

</body>
</html>
